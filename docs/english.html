<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.555">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Arturo Carrillo Villarreal">

<title>Avocado Forecasts - English Version</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link href="site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">

<script src="site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>

<script src="site_libs/plotly-binding-4.10.4/plotly.js"></script>

<script src="site_libs/typedarray-0.1/typedarray.min.js"></script>

<script src="site_libs/jquery-3.5.1/jquery.min.js"></script>

<link href="site_libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">

<script src="site_libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>

<link href="site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">

<script src="site_libs/plotly-main-2.11.1/plotly-latest.min.js"></script>


  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Avocado Forecasts</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./english.html" aria-current="page"> 
<span class="menu-text">English Version</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./spanish.html"> 
<span class="menu-text">Spanish Version</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#u.s.-avocado-sales-volume-forecast" id="toc-u.s.-avocado-sales-volume-forecast" class="nav-link active" data-scroll-target="#u.s.-avocado-sales-volume-forecast">U.S. Avocado Sales Volume Forecast</a>
  <ul class="collapse">
  <li><a href="#packages" id="toc-packages" class="nav-link" data-scroll-target="#packages">PACKAGES</a></li>
  <li><a href="#data-preparation" id="toc-data-preparation" class="nav-link" data-scroll-target="#data-preparation">DATA PREPARATION</a></li>
  <li><a href="#analyze-original-series-seasonality-and-heteroscedasticity." id="toc-analyze-original-series-seasonality-and-heteroscedasticity." class="nav-link" data-scroll-target="#analyze-original-series-seasonality-and-heteroscedasticity.">ANALYZE ORIGINAL SERIES, SEASONALITY AND HETEROSCEDASTICITY.</a>
  <ul class="collapse">
  <li><a href="#original-series" id="toc-original-series" class="nav-link" data-scroll-target="#original-series">Original series</a></li>
  <li><a href="#seasonality" id="toc-seasonality" class="nav-link" data-scroll-target="#seasonality">Seasonality</a></li>
  <li><a href="#heterocedasticity" id="toc-heterocedasticity" class="nav-link" data-scroll-target="#heterocedasticity">Heterocedasticity</a></li>
  </ul></li>
  <li><a href="#series-transformation" id="toc-series-transformation" class="nav-link" data-scroll-target="#series-transformation">SERIES TRANSFORMATION</a></li>
  <li><a href="#series-decomposition" id="toc-series-decomposition" class="nav-link" data-scroll-target="#series-decomposition">SERIES DECOMPOSITION</a></li>
  <li><a href="#training-and-test-data-sets" id="toc-training-and-test-data-sets" class="nav-link" data-scroll-target="#training-and-test-data-sets">TRAINING AND TEST DATA SETS</a></li>
  <li><a href="#exponential-smoothing" id="toc-exponential-smoothing" class="nav-link" data-scroll-target="#exponential-smoothing">EXPONENTIAL SMOOTHING</a>
  <ul class="collapse">
  <li><a href="#tentative-identification-of-the-model" id="toc-tentative-identification-of-the-model" class="nav-link" data-scroll-target="#tentative-identification-of-the-model">Tentative Identification of the Model</a></li>
  <li><a href="#model-validation" id="toc-model-validation" class="nav-link" data-scroll-target="#model-validation">Model Validation</a></li>
  <li><a href="#residuals-normality-check" id="toc-residuals-normality-check" class="nav-link" data-scroll-target="#residuals-normality-check">Residuals normality check</a></li>
  <li><a href="#forecast-charts" id="toc-forecast-charts" class="nav-link" data-scroll-target="#forecast-charts">Forecast Charts</a></li>
  </ul></li>
  <li><a href="#arima" id="toc-arima" class="nav-link" data-scroll-target="#arima">ARIMA</a>
  <ul class="collapse">
  <li><a href="#tentative-model-identification" id="toc-tentative-model-identification" class="nav-link" data-scroll-target="#tentative-model-identification">Tentative Model Identification</a></li>
  <li><a href="#acf-pacf" id="toc-acf-pacf" class="nav-link" data-scroll-target="#acf-pacf">ACF &amp; PACF</a></li>
  <li><a href="#model-estimation" id="toc-model-estimation" class="nav-link" data-scroll-target="#model-estimation">Model Estimation</a></li>
  <li><a href="#model-validation-1" id="toc-model-validation-1" class="nav-link" data-scroll-target="#model-validation-1">Model Validation</a></li>
  <li><a href="#residuals-normality-check-1" id="toc-residuals-normality-check-1" class="nav-link" data-scroll-target="#residuals-normality-check-1">Residuals normality check</a></li>
  <li><a href="#forecast-charts-1" id="toc-forecast-charts-1" class="nav-link" data-scroll-target="#forecast-charts-1">Forecast Charts</a></li>
  </ul></li>
  <li><a href="#forecasting-with-stl-decomposition" id="toc-forecasting-with-stl-decomposition" class="nav-link" data-scroll-target="#forecasting-with-stl-decomposition">FORECASTING WITH STL DECOMPOSITION</a>
  <ul class="collapse">
  <li><a href="#model-validation-2" id="toc-model-validation-2" class="nav-link" data-scroll-target="#model-validation-2">Model Validation</a></li>
  <li><a href="#forecast-charts-2" id="toc-forecast-charts-2" class="nav-link" data-scroll-target="#forecast-charts-2">Forecast Charts</a></li>
  </ul></li>
  <li><a href="#forecasting-with-prophet" id="toc-forecasting-with-prophet" class="nav-link" data-scroll-target="#forecasting-with-prophet">FORECASTING WITH PROPHET</a>
  <ul class="collapse">
  <li><a href="#model-validation-3" id="toc-model-validation-3" class="nav-link" data-scroll-target="#model-validation-3">Model Validation</a></li>
  <li><a href="#forecast-charts-3" id="toc-forecast-charts-3" class="nav-link" data-scroll-target="#forecast-charts-3">Forecast Charts</a></li>
  </ul></li>
  <li><a href="#forecasting-with-neural-network-autoregression-nnar" id="toc-forecasting-with-neural-network-autoregression-nnar" class="nav-link" data-scroll-target="#forecasting-with-neural-network-autoregression-nnar">FORECASTING WITH NEURAL NETWORK AUTOREGRESSION (NNAR)</a>
  <ul class="collapse">
  <li><a href="#model-validation-4" id="toc-model-validation-4" class="nav-link" data-scroll-target="#model-validation-4">Model Validation</a></li>
  <li><a href="#forecast-charts-4" id="toc-forecast-charts-4" class="nav-link" data-scroll-target="#forecast-charts-4">Forecast Charts</a></li>
  </ul></li>
  <li><a href="#cross-validation" id="toc-cross-validation" class="nav-link" data-scroll-target="#cross-validation">CROSS-VALIDATION</a></li>
  <li><a href="#distribution-accuracy" id="toc-distribution-accuracy" class="nav-link" data-scroll-target="#distribution-accuracy">DISTRIBUTION ACCURACY</a>
  <ul class="collapse">
  <li><a href="#forecast-interval-graphs" id="toc-forecast-interval-graphs" class="nav-link" data-scroll-target="#forecast-interval-graphs">Forecast Interval Graphs</a></li>
  </ul></li>
  <li><a href="#conclusions" id="toc-conclusions" class="nav-link" data-scroll-target="#conclusions">CONCLUSIONS</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">English Version</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Arturo Carrillo Villarreal </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="u.s.-avocado-sales-volume-forecast" class="level1">
<h1>U.S. Avocado Sales Volume Forecast</h1>
<p>The following document presents the development of different forecasts for avocado sales volume in the United States. The document is divided by sections related to the type of process or forecast.</p>
<p>Models:</p>
<ol type="1">
<li><p>Exponential Smoothing</p></li>
<li><p>ARIMA</p></li>
<li><p>STL Decomposition</p></li>
<li><p>Prophet</p></li>
<li><p>Neural Network Auto-Regression</p></li>
</ol>
<section id="packages" class="level2">
<h2 class="anchored" data-anchor-id="packages">PACKAGES</h2>
<p>Packages loaded in the library required for this analysis.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Packages</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>packages <span class="ot">=</span> <span class="fu">c</span>(<span class="st">'dplyr'</span>,<span class="st">'ggplot2'</span>,<span class="st">'tsibble'</span>,<span class="st">'fable'</span>,<span class="st">'feasts'</span>,</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>             <span class="st">'gridExtra'</span>,<span class="st">'tseries'</span>,<span class="st">'fable.prophet'</span>,<span class="st">'plotly'</span>)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">lapply</span>(packages, library, <span class="at">character.only=</span><span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="data-preparation" class="level2">
<h2 class="anchored" data-anchor-id="data-preparation">DATA PREPARATION</h2>
<p>First, the loaded database is prepared in order to select only the data of the series of interest, group the information by months and convert the units of the sales volume in pounds to tons. We are interested in knowing the total US monthly volume of organic avocados.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>serie <span class="ot">=</span> avocado_data <span class="sc">%&gt;%</span> </span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Date, TotalVolume, type, region) <span class="sc">%&gt;%</span> </span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(type <span class="sc">==</span> <span class="st">"organic"</span> <span class="sc">&amp;</span> region <span class="sc">==</span> <span class="st">"TotalUS"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Month =</span> <span class="fu">yearmonth</span>(Date)) <span class="sc">%&gt;%</span> </span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Month) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">Volume =</span> <span class="fu">sum</span>(TotalVolume)) <span class="sc">%&gt;%</span> </span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">row_number</span>() <span class="sc">&lt;=</span> <span class="fu">n</span>()<span class="sc">-</span><span class="dv">1</span>) <span class="sc">%&gt;%</span> <span class="co">#Remove last row due to incomplete information</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tsibble</span>(<span class="at">index =</span> Month)</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert volume from pounds to tons</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>serie<span class="sc">$</span>Volume <span class="ot">=</span> (serie<span class="sc">$</span>Volume <span class="sc">*</span> <span class="fl">0.453592</span>)<span class="sc">/</span><span class="dv">1000</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="analyze-original-series-seasonality-and-heteroscedasticity." class="level2">
<h2 class="anchored" data-anchor-id="analyze-original-series-seasonality-and-heteroscedasticity.">ANALYZE ORIGINAL SERIES, SEASONALITY AND HETEROSCEDASTICITY.</h2>
<section id="original-series" class="level3">
<h3 class="anchored" data-anchor-id="original-series">Original series</h3>
<p>First, the original series is analyzed and the presence of seasonality is investigated.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot Original Series</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>graf_san <span class="ot">=</span> serie <span class="sc">%&gt;%</span> <span class="fu">autoplot</span>(Volume) <span class="sc">+</span> <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"Thousands of tons"</span>, <span class="at">x =</span> <span class="st">""</span>,</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">"Avocado sales volume in the U.S., 2015-2023"</span>)</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(graf_san)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-a0369616690bba646adf" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-a0369616690bba646adf">{"x":{"data":[{"x":[16436,16467,16495,16526,16556,16587,16617,16648,16679,16709,16740,16770,16801,16832,16861,16892,16922,16953,16983,17014,17045,17075,17106,17136,17167,17198,17226,17257,17287,17318,17348,17379,17410,17440,17471,17501,17532,17563,17591,17622,17652,17683,17713,17744,17775,17805,17836,17866,17897,17928,17956,17987,18017,18048,18078,18109,18140,18170,18201,18231,18262,18293,18322,18353,18383,18414,18444,18475,18506,18536,18567,18597,18628,18659,18687,18718,18748,18779,18809,18840,18871,18901,18932,18962,18993,19024,19052,19083,19113,19144,19174,19205,19236,19266,19297,19327,19358,19389,19417,19448,19478,19509,19539,19570,19601,19631,19662],"y":[1157.5340754808799,1252.5466672322398,1633.0099254275199,1369.8511648293602,1799.6418408852001,1172.39331395256,1137.7416384559999,1442.4696927447201,981.07980669999995,978.01275367359995,1295.6588541107999,1006.8286823272001,1713.2869551019198,1449.28402804032,1806.2790575766401,2090.1520584698401,2599.0492836518406,1844.50416260064,2268.2865045934404,1853.9327345649599,1740.02297392688,1738.4547657693602,1534.7811033128,1542.5034935050398,2142.2728636954398,2335.0631621738398,2640.8766439748797,3089.6743307561601,2395.8808863959202,2338.7080369771998,2611.7244811794399,1901.5531360441601,1981.9726344298397,2591.4828746765602,1831.9711661650401,2680.4986263861601,2149.2329471724797,2439.9918647147997,2653.3072374805597,3307.66465400584,2865.8307610841598,3123.5559476502399,3278.4744802007999,2286.1015662612799,2980.1083031876801,2577.2172928785599,2444.7657844371997,3094.3499933795201,3035.0752349201603,2864.7399040756,3675.26679184864,2849.8065395992799,2409.4631318459201,2737.7891738570402,1962.2217963272799,2174.5448050513596,2933.9723178158397,2393.97793641424,2178.5188379613601,2678.1927642386399,2847.62916192168,2769.5665683912798,3547.9240901032799,2933.4831505952798,3927.1982750142402,2967.3835552699998,3036.6592734384799,3467.34586626904,2689.2863091418399,2621.7696661085597,3382.5419657550397,2763.60547593504,4412.3353034387201,3727.1616538272001,3569.9044871071201,3558.23449934664,4671.4607829398401,3120.6949342539197,2787.04210737528,3715.1196072287203,3110.3941819842398,4007.7156812331195,3119.9896621968001,3471.8348394970399,4938.0635269804789,3694.1409817646399,3652.4590611804797,3779.6165431685595,4464.4821085577596,3324.0698065882402,3798.4559607218398,2927.3919951689595,3103.2008887163202,3578.8132970704801,2772.8868572953597,2945.3883167359199,4489.6456781399993,3274.1817308720001,3502.7699000795201,4401.4067843769599,3485.3126816763997,3164.0916593940801,3856.3099556391999,3100.7418757659198,2846.6256984837596,3700.2450101319196,3257.6429727659997],"text":["Month: 2015 Jan<br />Volume: 1157.5341","Month: 2015 Feb<br />Volume: 1252.5467","Month: 2015 Mar<br />Volume: 1633.0099","Month: 2015 Apr<br />Volume: 1369.8512","Month: 2015 May<br />Volume: 1799.6418","Month: 2015 Jun<br />Volume: 1172.3933","Month: 2015 Jul<br />Volume: 1137.7416","Month: 2015 Aug<br />Volume: 1442.4697","Month: 2015 Sep<br />Volume:  981.0798","Month: 2015 Oct<br />Volume:  978.0128","Month: 2015 Nov<br />Volume: 1295.6589","Month: 2015 Dec<br />Volume: 1006.8287","Month: 2016 Jan<br />Volume: 1713.2870","Month: 2016 Feb<br />Volume: 1449.2840","Month: 2016 Mar<br />Volume: 1806.2791","Month: 2016 Apr<br />Volume: 2090.1521","Month: 2016 May<br />Volume: 2599.0493","Month: 2016 Jun<br />Volume: 1844.5042","Month: 2016 Jul<br />Volume: 2268.2865","Month: 2016 Aug<br />Volume: 1853.9327","Month: 2016 Sep<br />Volume: 1740.0230","Month: 2016 Oct<br />Volume: 1738.4548","Month: 2016 Nov<br />Volume: 1534.7811","Month: 2016 Dec<br />Volume: 1542.5035","Month: 2017 Jan<br />Volume: 2142.2729","Month: 2017 Feb<br />Volume: 2335.0632","Month: 2017 Mar<br />Volume: 2640.8766","Month: 2017 Apr<br />Volume: 3089.6743","Month: 2017 May<br />Volume: 2395.8809","Month: 2017 Jun<br />Volume: 2338.7080","Month: 2017 Jul<br />Volume: 2611.7245","Month: 2017 Aug<br />Volume: 1901.5531","Month: 2017 Sep<br />Volume: 1981.9726","Month: 2017 Oct<br />Volume: 2591.4829","Month: 2017 Nov<br />Volume: 1831.9712","Month: 2017 Dec<br />Volume: 2680.4986","Month: 2018 Jan<br />Volume: 2149.2329","Month: 2018 Feb<br />Volume: 2439.9919","Month: 2018 Mar<br />Volume: 2653.3072","Month: 2018 Apr<br />Volume: 3307.6647","Month: 2018 May<br />Volume: 2865.8308","Month: 2018 Jun<br />Volume: 3123.5559","Month: 2018 Jul<br />Volume: 3278.4745","Month: 2018 Aug<br />Volume: 2286.1016","Month: 2018 Sep<br />Volume: 2980.1083","Month: 2018 Oct<br />Volume: 2577.2173","Month: 2018 Nov<br />Volume: 2444.7658","Month: 2018 Dec<br />Volume: 3094.3500","Month: 2019 Jan<br />Volume: 3035.0752","Month: 2019 Feb<br />Volume: 2864.7399","Month: 2019 Mar<br />Volume: 3675.2668","Month: 2019 Apr<br />Volume: 2849.8065","Month: 2019 May<br />Volume: 2409.4631","Month: 2019 Jun<br />Volume: 2737.7892","Month: 2019 Jul<br />Volume: 1962.2218","Month: 2019 Aug<br />Volume: 2174.5448","Month: 2019 Sep<br />Volume: 2933.9723","Month: 2019 Oct<br />Volume: 2393.9779","Month: 2019 Nov<br />Volume: 2178.5188","Month: 2019 Dec<br />Volume: 2678.1928","Month: 2020 Jan<br />Volume: 2847.6292","Month: 2020 Feb<br />Volume: 2769.5666","Month: 2020 Mar<br />Volume: 3547.9241","Month: 2020 Apr<br />Volume: 2933.4832","Month: 2020 May<br />Volume: 3927.1983","Month: 2020 Jun<br />Volume: 2967.3836","Month: 2020 Jul<br />Volume: 3036.6593","Month: 2020 Aug<br />Volume: 3467.3459","Month: 2020 Sep<br />Volume: 2689.2863","Month: 2020 Oct<br />Volume: 2621.7697","Month: 2020 Nov<br />Volume: 3382.5420","Month: 2020 Dec<br />Volume: 2763.6055","Month: 2021 Jan<br />Volume: 4412.3353","Month: 2021 Feb<br />Volume: 3727.1617","Month: 2021 Mar<br />Volume: 3569.9045","Month: 2021 Apr<br />Volume: 3558.2345","Month: 2021 May<br />Volume: 4671.4608","Month: 2021 Jun<br />Volume: 3120.6949","Month: 2021 Jul<br />Volume: 2787.0421","Month: 2021 Aug<br />Volume: 3715.1196","Month: 2021 Sep<br />Volume: 3110.3942","Month: 2021 Oct<br />Volume: 4007.7157","Month: 2021 Nov<br />Volume: 3119.9897","Month: 2021 Dec<br />Volume: 3471.8348","Month: 2022 Jan<br />Volume: 4938.0635","Month: 2022 Feb<br />Volume: 3694.1410","Month: 2022 Mar<br />Volume: 3652.4591","Month: 2022 Apr<br />Volume: 3779.6165","Month: 2022 May<br />Volume: 4464.4821","Month: 2022 Jun<br />Volume: 3324.0698","Month: 2022 Jul<br />Volume: 3798.4560","Month: 2022 Aug<br />Volume: 2927.3920","Month: 2022 Sep<br />Volume: 3103.2009","Month: 2022 Oct<br />Volume: 3578.8133","Month: 2022 Nov<br />Volume: 2772.8869","Month: 2022 Dec<br />Volume: 2945.3883","Month: 2023 Jan<br />Volume: 4489.6457","Month: 2023 Feb<br />Volume: 3274.1817","Month: 2023 Mar<br />Volume: 3502.7699","Month: 2023 Apr<br />Volume: 4401.4068","Month: 2023 May<br />Volume: 3485.3127","Month: 2023 Jun<br />Volume: 3164.0917","Month: 2023 Jul<br />Volume: 3856.3100","Month: 2023 Aug<br />Volume: 3100.7419","Month: 2023 Sep<br />Volume: 2846.6257","Month: 2023 Oct<br />Volume: 3700.2450","Month: 2023 Nov<br />Volume: 3257.6430"],"type":"scatter","mode":"lines+markers","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","marker":{"autocolorscale":false,"color":"rgba(0,0,0,1)","opacity":1,"size":5.6692913385826778,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)"}},"frame":null}],"layout":{"margin":{"t":43.762557077625573,"r":7.3059360730593621,"b":25.570776255707766,"l":48.949771689497723},"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"title":{"text":"Avocado sales volume in the U.S., 2015-2023","font":{"color":"rgba(0,0,0,1)","family":"","size":17.534246575342465},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[16274.700000000001,19823.299999999999],"tickmode":"array","ticktext":["2016 Jan","2018 Jan","2020 Jan","2022 Jan","2024 Jan"],"tickvals":[16801,17532,18262,18993,19723],"categoryorder":"array","categoryarray":["2016 Jan","2018 Jan","2020 Jan","2022 Jan","2024 Jan"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y","title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[780.01021500825595,5136.0660656458231],"tickmode":"array","ticktext":["1000","2000","3000","4000","5000"],"tickvals":[1000,2000,3000,4000,5000],"categoryorder":"array","categoryarray":["1000","2000","3000","4000","5000"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":{"text":"Thousands of tons","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.8897637795275593,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"84c0ed2a1f":{"x":{},"y":{},"type":"scatter"},"84c03c4b263d":{"x":{},"y":{}}},"cur_data":"84c0ed2a1f","visdat":{"84c0ed2a1f":["function (y) ","x"],"84c03c4b263d":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>It can be seen that the series has a positive trend, as well as the possible presence of heteroscedasticity and seasonality.</p>
</section>
<section id="seasonality" class="level3">
<h3 class="anchored" data-anchor-id="seasonality">Seasonality</h3>
<p>The following seasonality plots with the <code>gg_season()</code> and <code>gg_subseries()</code> functions confirm the presence of seasonality.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="english_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="english_files/figure-html/unnamed-chunk-5-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="heterocedasticity" class="level3">
<h3 class="anchored" data-anchor-id="heterocedasticity">Heterocedasticity</h3>
<p>When suspecting the presence of heteroscedasticity, a first difference is drawn to see how it behaves over time.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># First Difference</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>serie_dif <span class="ot">=</span> </span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  serie <span class="sc">%&gt;%</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Difference =</span> <span class="fu">difference</span>(Volume, <span class="at">order_by =</span> Month)) <span class="sc">%&gt;%</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>Volume) <span class="sc">%&gt;%</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">row_number</span>() <span class="sc">&gt;</span> <span class="dv">1</span>)</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Graficar First Difference</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>graf_serie_dif <span class="ot">=</span> serie_dif <span class="sc">%&gt;%</span> <span class="fu">autoplot</span>(Difference) <span class="sc">+</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="fu">mean</span>(serie_dif<span class="sc">$</span>Difference),<span class="at">lty=</span><span class="dv">2</span>,<span class="at">col=</span><span class="st">"red"</span>) <span class="sc">+</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"First Difference"</span>, <span class="at">x=</span><span class="st">""</span>)</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(graf_serie_dif)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-1b4623a43ccf97063cd7" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-1b4623a43ccf97063cd7">{"x":{"data":[{"x":[16467,16495,16526,16556,16587,16617,16648,16679,16709,16740,16770,16801,16832,16861,16892,16922,16953,16983,17014,17045,17075,17106,17136,17167,17198,17226,17257,17287,17318,17348,17379,17410,17440,17471,17501,17532,17563,17591,17622,17652,17683,17713,17744,17775,17805,17836,17866,17897,17928,17956,17987,18017,18048,18078,18109,18140,18170,18201,18231,18262,18293,18322,18353,18383,18414,18444,18475,18506,18536,18567,18597,18628,18659,18687,18718,18748,18779,18809,18840,18871,18901,18932,18962,18993,19024,19052,19083,19113,19144,19174,19205,19236,19266,19297,19327,19358,19389,19417,19448,19478,19509,19539,19570,19601,19631,19662],"y":[95.012591751359878,380.4632581952801,-263.15876059815969,429.79067605583987,-627.24852693264006,-34.651675496560074,304.72805428872016,-461.38988604472013,-3.0670530264000035,317.64610043719995,-288.83017178359978,706.45827277471972,-264.00292706159985,356.99502953632009,283.87300089320001,508.89722518200051,-754.54512105120057,423.78234199280041,-414.35377002848054,-113.90976063807989,-1.5682081575198481,-203.67366245656012,7.7223901922397999,599.76937019039997,192.79029847840002,305.81348180103987,448.79768678128039,-693.79344436023985,-57.172849418720489,273.01644420224011,-710.17134513527981,80.419498385679617,609.51024024672051,-759.51170851152006,848.52746022112001,-531.26567921368041,290.75891754231998,213.31537276576,654.35741652528031,-441.83389292168022,257.72518656608008,154.91853255056003,-992.37291393952,694.00673692640021,-402.89101030912025,-132.45150844136015,649.5842089423204,-59.274758459359873,-170.3353308445603,810.52688777304002,-825.46025224936011,-440.34340775335977,328.32604201112008,-775.56737752976028,212.32300872407973,759.42751276448007,-539.99438140159964,-215.45909845287997,499.67392627727986,169.43639768304001,-78.062593530400136,778.35752171200011,-614.44093950800016,993.71512441896039,-959.81471974424039,69.275718168480125,430.68659283056013,-778.05955712720015,-67.516643033280161,760.77229964647995,-618.93648981999968,1648.7298275036801,-685.17364961151998,-157.25716672008002,-11.669987760480126,1113.2262835932002,-1550.7658486859204,-333.65282687863964,928.07749985344026,-604.72542524448045,897.32149924887972,-887.72601903631949,351.84517730023981,1466.228687483439,-1243.9225452158389,-41.681920584160252,127.15748198807978,684.86556538920013,-1140.4123019695194,474.38615413359958,-871.06396555288029,175.80889354736064,475.61240835415992,-805.92643977512034,172.50145944056021,1544.2573614040793,-1215.4639472679992,228.58816920751997,898.63688429743979,-916.09410270056014,-321.22102228231961,692.21829624511975,-755.56807987328011,-254.11617728216015,853.61931164815996,-442.60203736591984],"text":["Month: 2015 Feb<br />Difference:    95.012592","Month: 2015 Mar<br />Difference:   380.463258","Month: 2015 Apr<br />Difference:  -263.158761","Month: 2015 May<br />Difference:   429.790676","Month: 2015 Jun<br />Difference:  -627.248527","Month: 2015 Jul<br />Difference:   -34.651675","Month: 2015 Aug<br />Difference:   304.728054","Month: 2015 Sep<br />Difference:  -461.389886","Month: 2015 Oct<br />Difference:    -3.067053","Month: 2015 Nov<br />Difference:   317.646100","Month: 2015 Dec<br />Difference:  -288.830172","Month: 2016 Jan<br />Difference:   706.458273","Month: 2016 Feb<br />Difference:  -264.002927","Month: 2016 Mar<br />Difference:   356.995030","Month: 2016 Apr<br />Difference:   283.873001","Month: 2016 May<br />Difference:   508.897225","Month: 2016 Jun<br />Difference:  -754.545121","Month: 2016 Jul<br />Difference:   423.782342","Month: 2016 Aug<br />Difference:  -414.353770","Month: 2016 Sep<br />Difference:  -113.909761","Month: 2016 Oct<br />Difference:    -1.568208","Month: 2016 Nov<br />Difference:  -203.673662","Month: 2016 Dec<br />Difference:     7.722390","Month: 2017 Jan<br />Difference:   599.769370","Month: 2017 Feb<br />Difference:   192.790298","Month: 2017 Mar<br />Difference:   305.813482","Month: 2017 Apr<br />Difference:   448.797687","Month: 2017 May<br />Difference:  -693.793444","Month: 2017 Jun<br />Difference:   -57.172849","Month: 2017 Jul<br />Difference:   273.016444","Month: 2017 Aug<br />Difference:  -710.171345","Month: 2017 Sep<br />Difference:    80.419498","Month: 2017 Oct<br />Difference:   609.510240","Month: 2017 Nov<br />Difference:  -759.511709","Month: 2017 Dec<br />Difference:   848.527460","Month: 2018 Jan<br />Difference:  -531.265679","Month: 2018 Feb<br />Difference:   290.758918","Month: 2018 Mar<br />Difference:   213.315373","Month: 2018 Apr<br />Difference:   654.357417","Month: 2018 May<br />Difference:  -441.833893","Month: 2018 Jun<br />Difference:   257.725187","Month: 2018 Jul<br />Difference:   154.918533","Month: 2018 Aug<br />Difference:  -992.372914","Month: 2018 Sep<br />Difference:   694.006737","Month: 2018 Oct<br />Difference:  -402.891010","Month: 2018 Nov<br />Difference:  -132.451508","Month: 2018 Dec<br />Difference:   649.584209","Month: 2019 Jan<br />Difference:   -59.274758","Month: 2019 Feb<br />Difference:  -170.335331","Month: 2019 Mar<br />Difference:   810.526888","Month: 2019 Apr<br />Difference:  -825.460252","Month: 2019 May<br />Difference:  -440.343408","Month: 2019 Jun<br />Difference:   328.326042","Month: 2019 Jul<br />Difference:  -775.567378","Month: 2019 Aug<br />Difference:   212.323009","Month: 2019 Sep<br />Difference:   759.427513","Month: 2019 Oct<br />Difference:  -539.994381","Month: 2019 Nov<br />Difference:  -215.459098","Month: 2019 Dec<br />Difference:   499.673926","Month: 2020 Jan<br />Difference:   169.436398","Month: 2020 Feb<br />Difference:   -78.062594","Month: 2020 Mar<br />Difference:   778.357522","Month: 2020 Apr<br />Difference:  -614.440940","Month: 2020 May<br />Difference:   993.715124","Month: 2020 Jun<br />Difference:  -959.814720","Month: 2020 Jul<br />Difference:    69.275718","Month: 2020 Aug<br />Difference:   430.686593","Month: 2020 Sep<br />Difference:  -778.059557","Month: 2020 Oct<br />Difference:   -67.516643","Month: 2020 Nov<br />Difference:   760.772300","Month: 2020 Dec<br />Difference:  -618.936490","Month: 2021 Jan<br />Difference:  1648.729828","Month: 2021 Feb<br />Difference:  -685.173650","Month: 2021 Mar<br />Difference:  -157.257167","Month: 2021 Apr<br />Difference:   -11.669988","Month: 2021 May<br />Difference:  1113.226284","Month: 2021 Jun<br />Difference: -1550.765849","Month: 2021 Jul<br />Difference:  -333.652827","Month: 2021 Aug<br />Difference:   928.077500","Month: 2021 Sep<br />Difference:  -604.725425","Month: 2021 Oct<br />Difference:   897.321499","Month: 2021 Nov<br />Difference:  -887.726019","Month: 2021 Dec<br />Difference:   351.845177","Month: 2022 Jan<br />Difference:  1466.228687","Month: 2022 Feb<br />Difference: -1243.922545","Month: 2022 Mar<br />Difference:   -41.681921","Month: 2022 Apr<br />Difference:   127.157482","Month: 2022 May<br />Difference:   684.865565","Month: 2022 Jun<br />Difference: -1140.412302","Month: 2022 Jul<br />Difference:   474.386154","Month: 2022 Aug<br />Difference:  -871.063966","Month: 2022 Sep<br />Difference:   175.808894","Month: 2022 Oct<br />Difference:   475.612408","Month: 2022 Nov<br />Difference:  -805.926440","Month: 2022 Dec<br />Difference:   172.501459","Month: 2023 Jan<br />Difference:  1544.257361","Month: 2023 Feb<br />Difference: -1215.463947","Month: 2023 Mar<br />Difference:   228.588169","Month: 2023 Apr<br />Difference:   898.636884","Month: 2023 May<br />Difference:  -916.094103","Month: 2023 Jun<br />Difference:  -321.221022","Month: 2023 Jul<br />Difference:   692.218296","Month: 2023 Aug<br />Difference:  -755.568080","Month: 2023 Sep<br />Difference:  -254.116177","Month: 2023 Oct<br />Difference:   853.619312","Month: 2023 Nov<br />Difference:  -442.602037"],"type":"scatter","mode":"lines+markers","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","marker":{"autocolorscale":false,"color":"rgba(0,0,0,1)","opacity":1,"size":5.6692913385826778,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)"}},"frame":null},{"x":[16307.25,19821.75],"y":[19.812348087595471,19.812348087595471],"text":"yintercept: 19.81235","type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(255,0,0,1)","dash":"dash"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":43.762557077625573,"r":7.3059360730593621,"b":25.570776255707766,"l":54.794520547945211},"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"title":{"text":"First Difference","font":{"color":"rgba(0,0,0,1)","family":"","size":17.534246575342465},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[16307.25,19821.75],"tickmode":"array","ticktext":["2016 Jan","2018 Jan","2020 Jan","2022 Jan","2024 Jan"],"tickvals":[16801,17532,18262,18993,19723],"categoryorder":"array","categoryarray":["2016 Jan","2018 Jan","2020 Jan","2022 Jan","2024 Jan"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y","title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-1710.7406324954004,1808.7046113131601],"tickmode":"array","ticktext":["-1000","0","1000"],"tickvals":[-1000,0,1000],"categoryorder":"array","categoryarray":["-1000","0","1000"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":{"text":"Difference","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.8897637795275593,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"84c012f07f21":{"x":{},"y":{},"type":"scatter"},"84c01a3112ca":{"yintercept":{}},"84c0519549a1":{"x":{},"y":{}}},"cur_data":"84c012f07f21","visdat":{"84c012f07f21":["function (y) ","x"],"84c01a3112ca":["function (y) ","x"],"84c0519549a1":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Looking at the plot of the first difference confirms the presence of heteroscedasticity as the variance increases over time. Therefore, it will be necessary to perform some transformation.</p>
</section>
</section>
<section id="series-transformation" class="level2">
<h2 class="anchored" data-anchor-id="series-transformation">SERIES TRANSFORMATION</h2>
<p>A Box-Cox transformation will be performed to deal with the heteroscedasticity of the series for which the Guerrero method will be used to obtain it.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Estimating Lambda</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>lambda <span class="ot">=</span> </span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  serie <span class="sc">%&gt;%</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">features</span>(Volume, <span class="at">features =</span> guerrero) <span class="sc">%&gt;%</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(lambda_guerrero)</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Transformed Series</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>graf_st <span class="ot">=</span> serie <span class="sc">%&gt;%</span> </span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">autoplot</span>(<span class="fu">box_cox</span>(Volume,lambda)) <span class="sc">+</span> </span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Box-Cox transformed series"</span>,</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span><span class="st">""</span>, <span class="at">y=</span> <span class="st">""</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Original and transformed series comparison graphs</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a><span class="fu">grid.arrange</span>(graf_san,graf_st)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="english_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>A comparison of the first difference of the original series and the transformed series is also used to show how heteroscedasticity is corrected by the transformation.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="english_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="series-decomposition" class="level2">
<h2 class="anchored" data-anchor-id="series-decomposition">SERIES DECOMPOSITION</h2>
<p>The following is a decomposition of the series into its various components using the STL method, which stands for <em>Seasonal and Trend decomposition using Loess</em>.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="english_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>To better identify trend changes in the trend-cycle indicator, a graph is made where it changes color according to its direction.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Trend-Cycle</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>trend_cycle <span class="ot">=</span> </span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  serie <span class="sc">%&gt;%</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">model</span>(<span class="fu">STL</span>(<span class="fu">box_cox</span>(Volume,lambda))) <span class="sc">%&gt;%</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">components</span>() <span class="sc">%&gt;%</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Month, trend) <span class="sc">%&gt;%</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">dif =</span> <span class="fu">difference</span>(trend))</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Shifting Color for Plotting</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>ccpg <span class="ot">=</span> <span class="fu">c</span>()</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a><span class="co">#Note: One period is lagged to coincide with the start of the changeover.</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">2</span><span class="sc">:</span><span class="fu">nrow</span>(trend_cycle)){</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(trend_cycle<span class="sc">$</span>dif[i] <span class="sc">&gt;=</span> <span class="dv">0</span>){</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>    ccpg <span class="ot">=</span> <span class="fu">append</span>(ccpg, <span class="st">'black'</span>)</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>  }<span class="cf">else</span>{</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>    ccpg <span class="ot">=</span> <span class="fu">append</span>(ccpg, <span class="st">'red'</span>)</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a><span class="co">#last color equal to the last color available</span></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>ccpg <span class="ot">=</span> <span class="fu">append</span>(ccpg, ccpg[<span class="fu">length</span>(ccpg)])</span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Trend-Cycle Graph</span></span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>trend_cycle <span class="sc">%&gt;%</span></span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>dif) <span class="sc">%&gt;%</span></span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">trend =</span> <span class="fu">inv_box_cox</span>(trend,lambda)) <span class="sc">%&gt;%</span></span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Month, <span class="at">y =</span> trend)) <span class="sc">+</span> </span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">col=</span>ccpg, <span class="at">lwd=</span><span class="fl">1.5</span>) <span class="sc">+</span></span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Avocado Sales Volume Trend-Cycle"</span>,</span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">"United States, 2015 - 2023"</span>,</span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Thousands of tons"</span>, <span class="at">x =</span> <span class="st">""</span>,</span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a>       )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="english_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="training-and-test-data-sets" class="level2">
<h2 class="anchored" data-anchor-id="training-and-test-data-sets">TRAINING AND TEST DATA SETS</h2>
<p>To evaluate the accuracy of the forecasts, the series is separated into a training data set and a test data set. For this exercise we seek to forecast the following 10 periods (Months).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Steps to forecast</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>pap <span class="ot">=</span> <span class="dv">10</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Training Data</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>train_ini <span class="ot">=</span> <span class="fu">substr</span>(<span class="fu">as.character</span>(<span class="fu">as.Date</span>(serie<span class="sc">$</span>Month[<span class="dv">1</span>])),<span class="dv">1</span>,<span class="dv">7</span>)</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>train_end <span class="ot">=</span> <span class="fu">substr</span>(<span class="fu">as.character</span>(<span class="fu">as.Date</span>(serie<span class="sc">$</span>Month[<span class="fu">nrow</span>(serie)<span class="sc">-</span>pap])),<span class="dv">1</span>,<span class="dv">7</span>)</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>train_data <span class="ot">=</span> serie <span class="sc">%&gt;%</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter_index</span>(train_ini <span class="sc">~</span> train_end)</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Test Data</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>test_ini <span class="ot">=</span> <span class="fu">substr</span>(<span class="fu">as.character</span>(<span class="fu">as.Date</span>(serie<span class="sc">$</span>Month[<span class="fu">nrow</span>(serie) <span class="sc">-</span> pap <span class="sc">+</span> <span class="dv">1</span>])),<span class="dv">1</span>,<span class="dv">7</span>)</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>test_data <span class="ot">=</span> serie <span class="sc">%&gt;%</span> <span class="fu">filter_index</span>(test_ini <span class="sc">~</span>.)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="exponential-smoothing" class="level2">
<h2 class="anchored" data-anchor-id="exponential-smoothing">EXPONENTIAL SMOOTHING</h2>
<section id="tentative-identification-of-the-model" class="level3">
<h3 class="anchored" data-anchor-id="tentative-identification-of-the-model">Tentative Identification of the Model</h3>
<p>The first model to review is the Exponential Smoothing model for which we are going to use the characteristics of the behavior of the series previously identified to give us an idea of what would be the best model for the series we have.</p>
<p>Identified characteristics:</p>
<ul>
<li><p>Trend</p></li>
<li><p>Seasonality</p></li>
<li><p>Heterocedasticity</p></li>
</ul>
<p>Since these characteristics are detected, the following models will be analyzed:</p>
<ul>
<li><p>ETS(M,A,M)</p></li>
<li><p>ETS(M,Ad,M)</p></li>
</ul>
<p>In addition, it is reviewed whether the Automatic Model represents a good alternative.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Models to Review</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>mod_se <span class="ot">=</span> train_data <span class="sc">%&gt;%</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">model</span>(</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">Auto =</span> <span class="fu">ETS</span>(Volume), <span class="co"># Automatic model &lt;ETS(M,Ad,A)&gt;</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">MAM =</span> <span class="fu">ETS</span>(Volume <span class="sc">~</span> <span class="fu">error</span>(<span class="st">"M"</span>) <span class="sc">+</span> <span class="fu">trend</span>(<span class="st">"A"</span>) <span class="sc">+</span> <span class="fu">season</span>(<span class="st">"M"</span>)),</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">MAdM =</span> <span class="fu">ETS</span>(Volume <span class="sc">~</span> <span class="fu">error</span>(<span class="st">"M"</span>) <span class="sc">+</span> <span class="fu">trend</span>(<span class="st">"Ad"</span>) <span class="sc">+</span> <span class="fu">season</span>(<span class="st">"M"</span>)),</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Information Criteria (AICc)</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a><span class="fu">glance</span>(mod_se) <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(AICc)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 9
  .model sigma2 log_lik   AIC  AICc   BIC     MSE    AMSE   MAE
  &lt;chr&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;
1 Auto   0.0243   -792. 1620. 1628. 1666. 156246. 158324. 0.117
2 MAM    0.0249   -795. 1625. 1633. 1669. 168550. 176817. 0.121
3 MAdM   0.0260   -795. 1626. 1635. 1672. 155850. 159705. 0.121</code></pre>
</div>
</div>
<p>Although the <em>ETS(M,Ad,A)</em> automatic model seems to show a better information criterion of AICc, it uses an additive stationarity, which given the heteroscedasticity of the model is not recommended, so we will select the <em>ETS(M,Ad,M)</em> model, which makes more sense given the behavior of the series.</p>
<p>When evaluating the accuracy of the models, it is observed that the <em>ETS(M,Ad,M)</em> model has a better performance than the <em>ETS(M,A,M)</em> model, so we will use the latter, which is an Exponential Smoothing with Damped Trend, Multiplicative Stationarity and Multiplicative Errors.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 4
  .model  RMSE   MAE  MAPE
  &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 Auto    437.  397.  11.8
2 MAdM    467.  417.  12.3
3 MAM     592.  452.  13.7</code></pre>
</div>
</div>
</section>
<section id="model-validation" class="level3">
<h3 class="anchored" data-anchor-id="model-validation">Model Validation</h3>
<p>Once the model to be used has been identified, it must be validated by analyzing its residuals. First we will review the assumptions of <span class="math inline">\(E[mu]=0\)</span> and homoscedasticity.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="english_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>It can be seen that these assumptions are fulfilled, now it remains to see the assumption of normality.</p>
</section>
<section id="residuals-normality-check" class="level3">
<h3 class="anchored" data-anchor-id="residuals-normality-check">Residuals normality check</h3>
<p>We seek to analyze by means of histogram, quantile-quantile plots and the Jarque-Bera test the assumption of normality of the residuals of the model.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Residuals histogram</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>hist_plot <span class="ot">=</span> residuals <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> .innov)) <span class="sc">+</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">20</span>, <span class="at">lwd =</span> <span class="fl">1.5</span>,<span class="at">col =</span> <span class="st">'white'</span>, <span class="at">fill =</span> <span class="st">'slategrey'</span>) <span class="sc">+</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Residuals Normality Check: Histogram and Quantile-Quantile"</span>, </span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Residuals"</span>, <span class="at">y =</span><span class="st">"Frequency"</span>)</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Q-Q Plot</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>qq_plot <span class="ot">=</span> residuals <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">sample =</span> .innov)) <span class="sc">+</span> </span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_qq</span>(<span class="at">col =</span> <span class="st">'slateblue'</span>) <span class="sc">+</span> <span class="fu">stat_qq_line</span>() <span class="sc">+</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Theoretical Quantiles"</span>, <span class="at">y =</span><span class="st">"Sample Quantiles"</span>)</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a><span class="fu">grid.arrange</span>(hist_plot,qq_plot)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="english_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Jarque-Bera Test</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="co"># p-value &gt; 0.05 indicates that it cannot be rejected as normally distributed.</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="fu">jarque.bera.test</span>(residuals<span class="sc">$</span>.innov)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Jarque Bera Test

data:  residuals$.innov
X-squared = 1.4323, df = 2, p-value = 0.4886</code></pre>
</div>
</div>
<p>It may be debatable whether the assumption of normality can be considered valid given the plots and the test that indicates that it cannot be rejected that the residuals are normally distributed.</p>
<p>In this situation, two alternatives are offered for the generation of confidence intervals. They can be performed assuming normal distribution, or also by means of a <em>Bootstrap</em> simulation.</p>
</section>
<section id="forecast-charts" class="level3">
<h3 class="anchored" data-anchor-id="forecast-charts">Forecast Charts</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot Forecast vs. Actual Values (Normal Distribution Assumption)</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>graf_se_dn <span class="ot">=</span> mod_se <span class="sc">%&gt;%</span> <span class="fu">select</span>(MAdM) <span class="sc">%&gt;%</span> <span class="fu">forecast</span>(<span class="at">h =</span> pap) <span class="sc">%&gt;%</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">autoplot</span>(</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>    serie <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Month <span class="sc">&gt;=</span> <span class="fu">yearmonth</span>(<span class="st">"2019-01-01"</span>)),</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">lwd =</span> <span class="fl">1.5</span>,</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">level =</span> <span class="dv">80</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Exponential Smoothing Forecast ETS(M,Ad,M)"</span>,</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">"ETS(M,Ad,M) Model with Normally Distributed Intervals"</span>,</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">""</span>)</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot Forecast vs. Actual Values (Bootstrap)</span></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>graf_se_boot <span class="ot">=</span> mod_se <span class="sc">%&gt;%</span> <span class="fu">select</span>(MAdM) <span class="sc">%&gt;%</span> <span class="fu">forecast</span>(<span class="at">h =</span> pap, <span class="at">bootstrap =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">autoplot</span>(</span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>    serie <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Month <span class="sc">&gt;=</span> <span class="fu">yearmonth</span>(<span class="st">"2019-01-01"</span>)),</span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>      <span class="at">lwd =</span> <span class="fl">1.5</span>,</span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">level =</span> <span class="dv">80</span></span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">subtitle =</span> <span class="st">"ETS(M,Ad,M) Model with Bootstrap Intervals"</span>,</span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">""</span>)</span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a><span class="fu">grid.arrange</span>(graf_se_dn,graf_se_boot)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="english_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Note that no major differences are observed between the two types of intervals.</p>
</section>
</section>
<section id="arima" class="level2">
<h2 class="anchored" data-anchor-id="arima">ARIMA</h2>
<p>The second model to review is the Seasonal ARIMA or SARIMA for which we will also take advantage of the previously identified characteristics of the behavior of the series to give us an idea of which would be the best models. As the series has trend and seasonality, one or more differences may need to be drawn. On the other hand, the Box-Cox transformation can be used to correct for heteroscedasticity.</p>
<section id="tentative-model-identification" class="level3">
<h3 class="anchored" data-anchor-id="tentative-model-identification">Tentative Model Identification</h3>
<p>First we need the series to be stationary, for which we calculated seasonal differences and first difference to identify if it is convenient to estimate more than one difference and if the first difference or the seasonal difference is preferred. When applying seasonal difference, it was not enough and another difference had to be computed On the other hand, by estimating only the first difference, it seems to be enough to make the series stationary.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># diff(box_cox(Volume,lambda)) Mean for stationarity graph</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>m_dif<span class="ot">=</span> train_data <span class="sc">%&gt;%</span> </span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">dif_vol =</span> <span class="fu">difference</span>(<span class="fu">box_cox</span>(Volume,lambda))) <span class="sc">%&gt;%</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(dif_vol) <span class="sc">%&gt;%</span> <span class="fu">mean</span>(<span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot of Differences Required for Stationarity</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>train_data <span class="sc">%&gt;%</span> <span class="fu">autoplot</span>(</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">box_cox</span>(Volume,lambda) <span class="sc">%&gt;%</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">difference</span>(<span class="dv">1</span>)</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>)  <span class="sc">+</span> <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">title =</span> <span class="st">"Stationarity Graph"</span>,</span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> <span class="st">""</span>, <span class="at">y =</span> <span class="st">""</span></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> m_dif, <span class="at">lty=</span><span class="dv">2</span>, <span class="at">col=</span><span class="st">"red"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="english_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>The Unit Root and Seasonal Strength tests can also be used to detect which differences would be more convenient to calculate.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Seasonal Difference Test</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="co"># seasonal_strength_year &gt;= 0.64 indicates to calculate seasonal difference</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>train_data <span class="sc">%&gt;%</span> <span class="fu">features</span>(<span class="fu">box_cox</span>(Volume,lambda), feat_stl)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 9
  trend_strength seasonal_strength_year seasonal_peak_year seasonal_trough_year
           &lt;dbl&gt;                  &lt;dbl&gt;              &lt;dbl&gt;                &lt;dbl&gt;
1          0.877                  0.506                  5                   11
# ℹ 5 more variables: spikiness &lt;dbl&gt;, linearity &lt;dbl&gt;, curvature &lt;dbl&gt;,
#   stl_e_acf1 &lt;dbl&gt;, stl_e_acf10 &lt;dbl&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Number of Seasonal Differences Required</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>train_data <span class="sc">%&gt;%</span> <span class="fu">features</span>(<span class="fu">box_cox</span>(Volume,lambda), unitroot_nsdiffs)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
  nsdiffs
    &lt;int&gt;
1       0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Unit Root Test</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="co"># kpss_pvalue &lt; 0.05 indicates calculate difference</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>train_data <span class="sc">%&gt;%</span> <span class="fu">features</span>(<span class="fu">box_cox</span>(Volume,lambda), unitroot_kpss)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 2
  kpss_stat kpss_pvalue
      &lt;dbl&gt;       &lt;dbl&gt;
1      2.08        0.01</code></pre>
</div>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Number of Differences Required</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>train_data <span class="sc">%&gt;%</span> <span class="fu">features</span>(<span class="fu">box_cox</span>(Volume,lambda), unitroot_ndiffs)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
  ndiffs
   &lt;int&gt;
1      1</code></pre>
</div>
</div>
<p>The various tests indicate that the recommended approach would be not to calculate seasonal difference and to calculate first difference.</p>
</section>
<section id="acf-pacf" class="level3">
<h3 class="anchored" data-anchor-id="acf-pacf">ACF &amp; PACF</h3>
<p>The next step would be to review the Sample and Partial Autocorrelation plots to identify tentative models.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Sample and Partial Autocorrelation Function Plots: ACF y PACF</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>acf_plot <span class="ot">=</span> <span class="fu">autoplot</span>(<span class="fu">ACF</span>(train_data, <span class="fu">difference</span>(<span class="fu">box_cox</span>(Volume,lambda)), <span class="at">lag_max =</span> <span class="dv">36</span>)) <span class="sc">+</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"ACF"</span>, <span class="at">x=</span><span class="st">""</span>, <span class="at">title =</span> <span class="st">"Sample and Partial Autocorrelation Functions: ACF and PACF"</span>)</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>pacf_plot <span class="ot">=</span> <span class="fu">autoplot</span>(<span class="fu">PACF</span>(train_data, <span class="fu">difference</span>(<span class="fu">box_cox</span>(Volume,lambda)), <span class="at">lag_max =</span> <span class="dv">36</span>)) <span class="sc">+</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"PACF"</span>, <span class="at">x=</span> <span class="st">"Lags"</span>)</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a><span class="fu">grid.arrange</span>(acf_plot,pacf_plot)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="english_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="model-estimation" class="level3">
<h3 class="anchored" data-anchor-id="model-estimation">Model Estimation</h3>
<p>Different models were estimated based on the lags shown in the ACF and PACF and the analysis of residuals.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Estimate Model (d=1,D=0)</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>mod_arima <span class="ot">=</span> train_data <span class="sc">%&gt;%</span> </span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">model</span>(</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">m210_002 =</span> <span class="fu">ARIMA</span>(<span class="fu">box_cox</span>(Volume,lambda) <span class="sc">~</span> <span class="dv">0</span> <span class="sc">+</span> <span class="fu">pdq</span>(<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">0</span>) <span class="sc">+</span> <span class="fu">PDQ</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">2</span>)),</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">m011_002 =</span> <span class="fu">ARIMA</span>(<span class="fu">box_cox</span>(Volume,lambda) <span class="sc">~</span> <span class="dv">0</span> <span class="sc">+</span> <span class="fu">pdq</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>) <span class="sc">+</span> <span class="fu">PDQ</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">2</span>)),</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">m810_002_c =</span> <span class="fu">ARIMA</span>(<span class="fu">box_cox</span>(Volume,lambda) <span class="sc">~</span> <span class="dv">1</span> <span class="sc">+</span> <span class="fu">pdq</span>(<span class="dv">8</span>,<span class="dv">1</span>,<span class="dv">0</span>) <span class="sc">+</span> <span class="fu">PDQ</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">2</span>)),</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">m217_002_c =</span> <span class="fu">ARIMA</span>(<span class="fu">box_cox</span>(Volume,lambda) <span class="sc">~</span> <span class="dv">1</span> <span class="sc">+</span> <span class="fu">pdq</span>(<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">7</span>) <span class="sc">+</span> <span class="fu">PDQ</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">2</span>)),</span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">m312_002 =</span> <span class="fu">ARIMA</span>(<span class="fu">box_cox</span>(Volume,lambda) <span class="sc">~</span> <span class="dv">0</span> <span class="sc">+</span> <span class="fu">pdq</span>(<span class="dv">3</span>,<span class="dv">1</span>,<span class="dv">2</span>) <span class="sc">+</span> <span class="fu">PDQ</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">2</span>)),</span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">m119_002 =</span> <span class="fu">ARIMA</span>(<span class="fu">box_cox</span>(Volume,lambda) <span class="sc">~</span> <span class="dv">0</span> <span class="sc">+</span> <span class="fu">pdq</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">9</span>) <span class="sc">+</span> <span class="fu">PDQ</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">2</span>))</span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Models sorted by AICc</span></span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a><span class="fu">glance</span>(mod_arima) <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(AICc)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 8
  .model     sigma2 log_lik   AIC  AICc   BIC ar_roots  ma_roots  
  &lt;chr&gt;       &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;list&gt;    &lt;list&gt;    
1 m810_002_c   20.2   -278.  580.  583.  610. &lt;cpl [8]&gt; &lt;cpl [24]&gt;
2 m217_002_c   19.4   -277.  580.  584.  613. &lt;cpl [2]&gt; &lt;cpl [31]&gt;
3 m210_002     21.7   -287.  584.  585.  597. &lt;cpl [2]&gt; &lt;cpl [24]&gt;
4 m119_002     19.6   -277.  581.  585.  614. &lt;cpl [1]&gt; &lt;cpl [33]&gt;
5 m011_002     22.8   -290.  587.  588.  597. &lt;cpl [0]&gt; &lt;cpl [25]&gt;
6 m312_002     22.2   -286.  588.  590.  609. &lt;cpl [3]&gt; &lt;cpl [26]&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Forecast Accuracy</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>mod_arima <span class="sc">%&gt;%</span> <span class="fu">forecast</span>(<span class="at">h =</span> pap) <span class="sc">%&gt;%</span> <span class="fu">accuracy</span>(test_data) <span class="sc">%&gt;%</span> </span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(.model,RMSE,MAE,MAPE) <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(MAPE)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 4
  .model      RMSE   MAE  MAPE
  &lt;chr&gt;      &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 m312_002    413.  328.  9.20
2 m119_002    423.  338.  9.56
3 m810_002_c  417.  336. 10.2 
4 m210_002    486.  386. 10.7 
5 m011_002    516.  412. 11.5 
6 m217_002_c  674.  587. 17.9 </code></pre>
</div>
</div>
<p>Their analysis was separated by differentiation for comparability.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Estimate Model (d=1,D=1)</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>mod_arima <span class="ot">=</span> train_data <span class="sc">%&gt;%</span> </span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">model</span>(</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">m119_110 =</span> <span class="fu">ARIMA</span>(<span class="fu">box_cox</span>(Volume,lambda) <span class="sc">~</span> <span class="dv">0</span> <span class="sc">+</span> <span class="fu">pdq</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">9</span>) <span class="sc">+</span> <span class="fu">PDQ</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>)),</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">m119_011 =</span> <span class="fu">ARIMA</span>(<span class="fu">box_cox</span>(Volume,lambda) <span class="sc">~</span> <span class="dv">0</span> <span class="sc">+</span> <span class="fu">pdq</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">9</span>) <span class="sc">+</span> <span class="fu">PDQ</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>))</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Models sorted by AICc</span></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a><span class="fu">glance</span>(mod_arima) <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(AICc)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 8
  .model   sigma2 log_lik   AIC  AICc   BIC ar_roots   ma_roots  
  &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;list&gt;     &lt;list&gt;    
1 m119_011   22.9   -251.  525.  530.  554. &lt;cpl [1]&gt;  &lt;cpl [21]&gt;
2 m119_110   23.5   -252.  527.  532.  556. &lt;cpl [13]&gt; &lt;cpl [9]&gt; </code></pre>
</div>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Forecast Accuracy</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>mod_arima <span class="sc">%&gt;%</span> <span class="fu">forecast</span>(<span class="at">h =</span> pap) <span class="sc">%&gt;%</span> <span class="fu">accuracy</span>(test_data) <span class="sc">%&gt;%</span> </span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(.model,RMSE,MAE,MAPE) <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(MAPE)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 4
  .model    RMSE   MAE  MAPE
  &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 m119_110  425.  324.  9.18
2 m119_011  502.  411. 12.2 </code></pre>
</div>
</div>
<p>Y después se eligieron los mejores modelos.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 8
  .model     sigma2 log_lik   AIC  AICc   BIC ar_roots   ma_roots  
  &lt;chr&gt;       &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;list&gt;     &lt;list&gt;    
1 m119_110     23.5   -252.  527.  532.  556. &lt;cpl [13]&gt; &lt;cpl [9]&gt; 
2 m810_002_c   20.2   -278.  580.  583.  610. &lt;cpl [8]&gt;  &lt;cpl [24]&gt;
3 m119_002     19.6   -277.  581.  585.  614. &lt;cpl [1]&gt;  &lt;cpl [33]&gt;
4 m312_002     22.2   -286.  588.  590.  609. &lt;cpl [3]&gt;  &lt;cpl [26]&gt;</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 4
  .model      RMSE   MAE  MAPE
  &lt;chr&gt;      &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 m119_110    425.  324.  9.18
2 m312_002    413.  328.  9.20
3 m119_002    423.  338.  9.56
4 m810_002_c  417.  336. 10.2 </code></pre>
</div>
</div>
<p>The same process was followed for the validation of each model.</p>
</section>
<section id="model-validation-1" class="level3">
<h3 class="anchored" data-anchor-id="model-validation-1">Model Validation</h3>
<p>The statistical significance of its components was reviewed and their residuals were extracted to analyze whether the assumptions were met.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Model to Review</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>mar <span class="ot">=</span> <span class="st">"m312_002"</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>residuals <span class="ot">=</span> <span class="fu">augment</span>(mod_arima) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(.model <span class="sc">==</span> mar) <span class="co"># Residuals of the Model to Review</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Review significance of values</span></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a><span class="co">#tidy(mod_arima)</span></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>mod_arima <span class="sc">%&gt;%</span> <span class="fu">select</span>(mar) <span class="sc">%&gt;%</span> <span class="fu">tidy</span>() <span class="sc">%&gt;%</span> <span class="fu">print</span>(<span class="at">n=</span><span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 6
  .model   term  estimate std.error statistic   p.value
  &lt;chr&gt;    &lt;chr&gt;    &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;
1 m312_002 ar1    -0.0251     0.256   -0.0980 0.922    
2 m312_002 ar2     0.276      0.149    1.85   0.0671   
3 m312_002 ar3     0.357      0.133    2.68   0.00873  
4 m312_002 ma1    -0.731      0.251   -2.91   0.00450  
5 m312_002 ma2    -0.169      0.190   -0.888  0.377    
6 m312_002 sma1    0.511      0.110    4.65   0.0000108
7 m312_002 sma2    0.518      0.153    3.39   0.00102  </code></pre>
</div>
</div>
<p>The residuals were plotted so that the assumptions of <span class="math inline">\(E[mu]=0\)</span> and homoscedasticity were met.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="english_files/figure-html/unnamed-chunk-24-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>ACF and PACF plots of the residuals were plotted to check for remaining autocorrelation in the model.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="english_files/figure-html/unnamed-chunk-25-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>As well as the Ljung-Box test.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A mable: 1 x 1
                   m312_002
                    &lt;model&gt;
1 &lt;ARIMA(3,1,2)(0,0,2)[12]&gt;</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 3
  .model   lb_stat lb_pvalue
  &lt;chr&gt;      &lt;dbl&gt;     &lt;dbl&gt;
1 m312_002    43.1  0.000469</code></pre>
</div>
</div>
</section>
<section id="residuals-normality-check-1" class="level3">
<h3 class="anchored" data-anchor-id="residuals-normality-check-1">Residuals normality check</h3>
<p>We seek to analyze by means of histogram, Q-Q plots and the Jarque-Bera test the assumption of normality of the residuals of the model.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="english_files/figure-html/unnamed-chunk-27-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Jarque Bera Test

data:  residuals$.innov
X-squared = 1.6021, df = 2, p-value = 0.4489</code></pre>
</div>
</div>
</section>
<section id="forecast-charts-1" class="level3">
<h3 class="anchored" data-anchor-id="forecast-charts-1">Forecast Charts</h3>
<p>The forecasts of the main models were plotted for comparison.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Forecasting the Top 4 ARIMA Models</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="co"># ARIMA Models for Plotting</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>mod_arima_pg <span class="ot">=</span> mod_arima <span class="sc">%&gt;%</span> </span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(</span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">ARIMA(1,1,9)(0,0,2)[12]</span><span class="st">`</span> <span class="ot">=</span> m119_002,</span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">ARIMA(3,1,2)(0,0,2)[12]</span><span class="st">`</span> <span class="ot">=</span> m312_002,</span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">ARIMA(8,1,0)(0,0,2)[12] c/ tendencia</span><span class="st">`</span> <span class="ot">=</span> m810_002_c,</span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">ARIMA(1,1,9)(1,1,0)[12]</span><span class="st">`</span> <span class="ot">=</span> m119_110</span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot Forecast vs. Actual values</span></span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a>graf_arima_4m <span class="ot">=</span> mod_arima_pg <span class="sc">%&gt;%</span> </span>
<span id="cb40-13"><a href="#cb40-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">forecast</span>(<span class="at">h =</span> pap) <span class="sc">%&gt;%</span></span>
<span id="cb40-14"><a href="#cb40-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">autoplot</span>(</span>
<span id="cb40-15"><a href="#cb40-15" aria-hidden="true" tabindex="-1"></a>    serie <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Month <span class="sc">&gt;=</span> <span class="fu">yearmonth</span>(<span class="st">"2021-01-01"</span>)),</span>
<span id="cb40-16"><a href="#cb40-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">level =</span> <span class="cn">NULL</span></span>
<span id="cb40-17"><a href="#cb40-17" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb40-18"><a href="#cb40-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Forecasting with ARIMA Models"</span>,<span class="at">x =</span> <span class="st">""</span>) <span class="sc">+</span></span>
<span id="cb40-19"><a href="#cb40-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">'none'</span>)  <span class="sc">+</span></span>
<span id="cb40-20"><a href="#cb40-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="fu">vars</span>(.model), <span class="at">ncol =</span> <span class="dv">2</span>)</span>
<span id="cb40-21"><a href="#cb40-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-22"><a href="#cb40-22" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(graf_arima_4m)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-b0cb14d3ca034a22b82e" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-b0cb14d3ca034a22b82e">{"x":{"data":[{"x":[19389,19417,19448,19478,19509,19539,19570,19601,19631,19662],"y":[3437.0796186318958,3469.5099317454924,3727.0588552351905,3572.7596429512041,3270.5925924262533,3200.8323136758568,2588.8897961015527,3023.5770676062275,3429.490561346619,2559.1879434689436],"text":["Month: 2023 Feb<br />interaction(format(.model), sep = \"/\"): ARIMA(1,1,9)(0,0,2)[12]             <br />Volume: 3437.080<br />.model: ARIMA(1,1,9)(0,0,2)[12]","Month: 2023 Mar<br />interaction(format(.model), sep = \"/\"): ARIMA(1,1,9)(0,0,2)[12]             <br />Volume: 3469.510<br />.model: ARIMA(1,1,9)(0,0,2)[12]","Month: 2023 Apr<br />interaction(format(.model), sep = \"/\"): ARIMA(1,1,9)(0,0,2)[12]             <br />Volume: 3727.059<br />.model: ARIMA(1,1,9)(0,0,2)[12]","Month: 2023 May<br />interaction(format(.model), sep = \"/\"): ARIMA(1,1,9)(0,0,2)[12]             <br />Volume: 3572.760<br />.model: ARIMA(1,1,9)(0,0,2)[12]","Month: 2023 Jun<br />interaction(format(.model), sep = \"/\"): ARIMA(1,1,9)(0,0,2)[12]             <br />Volume: 3270.593<br />.model: ARIMA(1,1,9)(0,0,2)[12]","Month: 2023 Jul<br />interaction(format(.model), sep = \"/\"): ARIMA(1,1,9)(0,0,2)[12]             <br />Volume: 3200.832<br />.model: ARIMA(1,1,9)(0,0,2)[12]","Month: 2023 Aug<br />interaction(format(.model), sep = \"/\"): ARIMA(1,1,9)(0,0,2)[12]             <br />Volume: 2588.890<br />.model: ARIMA(1,1,9)(0,0,2)[12]","Month: 2023 Sep<br />interaction(format(.model), sep = \"/\"): ARIMA(1,1,9)(0,0,2)[12]             <br />Volume: 3023.577<br />.model: ARIMA(1,1,9)(0,0,2)[12]","Month: 2023 Oct<br />interaction(format(.model), sep = \"/\"): ARIMA(1,1,9)(0,0,2)[12]             <br />Volume: 3429.491<br />.model: ARIMA(1,1,9)(0,0,2)[12]","Month: 2023 Nov<br />interaction(format(.model), sep = \"/\"): ARIMA(1,1,9)(0,0,2)[12]             <br />Volume: 2559.188<br />.model: ARIMA(1,1,9)(0,0,2)[12]"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(248,118,109,1)","dash":"solid"},"hoveron":"points","name":"ARIMA(1,1,9)(0,0,2)[12]","legendgroup":"ARIMA(1,1,9)(0,0,2)[12]","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[19389,19417,19448,19478,19509,19539,19570,19601,19631,19662],"y":[3482.2815876068121,3805.604783414241,4068.9088549328508,4421.9932121555485,3333.8036852738878,3226.7218368717381,3143.6328910544194,2947.5880594037085,3677.0833894564889,2763.8152707462937],"text":["Month: 2023 Feb<br />interaction(format(.model), sep = \"/\"): ARIMA(1,1,9)(1,1,0)[12]             <br />Volume: 3482.282<br />.model: ARIMA(1,1,9)(1,1,0)[12]","Month: 2023 Mar<br />interaction(format(.model), sep = \"/\"): ARIMA(1,1,9)(1,1,0)[12]             <br />Volume: 3805.605<br />.model: ARIMA(1,1,9)(1,1,0)[12]","Month: 2023 Apr<br />interaction(format(.model), sep = \"/\"): ARIMA(1,1,9)(1,1,0)[12]             <br />Volume: 4068.909<br />.model: ARIMA(1,1,9)(1,1,0)[12]","Month: 2023 May<br />interaction(format(.model), sep = \"/\"): ARIMA(1,1,9)(1,1,0)[12]             <br />Volume: 4421.993<br />.model: ARIMA(1,1,9)(1,1,0)[12]","Month: 2023 Jun<br />interaction(format(.model), sep = \"/\"): ARIMA(1,1,9)(1,1,0)[12]             <br />Volume: 3333.804<br />.model: ARIMA(1,1,9)(1,1,0)[12]","Month: 2023 Jul<br />interaction(format(.model), sep = \"/\"): ARIMA(1,1,9)(1,1,0)[12]             <br />Volume: 3226.722<br />.model: ARIMA(1,1,9)(1,1,0)[12]","Month: 2023 Aug<br />interaction(format(.model), sep = \"/\"): ARIMA(1,1,9)(1,1,0)[12]             <br />Volume: 3143.633<br />.model: ARIMA(1,1,9)(1,1,0)[12]","Month: 2023 Sep<br />interaction(format(.model), sep = \"/\"): ARIMA(1,1,9)(1,1,0)[12]             <br />Volume: 2947.588<br />.model: ARIMA(1,1,9)(1,1,0)[12]","Month: 2023 Oct<br />interaction(format(.model), sep = \"/\"): ARIMA(1,1,9)(1,1,0)[12]             <br />Volume: 3677.083<br />.model: ARIMA(1,1,9)(1,1,0)[12]","Month: 2023 Nov<br />interaction(format(.model), sep = \"/\"): ARIMA(1,1,9)(1,1,0)[12]             <br />Volume: 2763.815<br />.model: ARIMA(1,1,9)(1,1,0)[12]"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(124,174,0,1)","dash":"solid"},"hoveron":"points","name":"ARIMA(1,1,9)(1,1,0)[12]","legendgroup":"ARIMA(1,1,9)(1,1,0)[12]","showlegend":true,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"x":[19389,19417,19448,19478,19509,19539,19570,19601,19631,19662],"y":[3298.5747827332966,3178.51952306664,3562.3631255116852,3618.2608089208802,3230.8858100202979,3256.5970617312496,2866.0713234884633,3278.6833013752253,3579.311268561064,2753.4641943420206],"text":["Month: 2023 Feb<br />interaction(format(.model), sep = \"/\"): ARIMA(3,1,2)(0,0,2)[12]             <br />Volume: 3298.575<br />.model: ARIMA(3,1,2)(0,0,2)[12]","Month: 2023 Mar<br />interaction(format(.model), sep = \"/\"): ARIMA(3,1,2)(0,0,2)[12]             <br />Volume: 3178.520<br />.model: ARIMA(3,1,2)(0,0,2)[12]","Month: 2023 Apr<br />interaction(format(.model), sep = \"/\"): ARIMA(3,1,2)(0,0,2)[12]             <br />Volume: 3562.363<br />.model: ARIMA(3,1,2)(0,0,2)[12]","Month: 2023 May<br />interaction(format(.model), sep = \"/\"): ARIMA(3,1,2)(0,0,2)[12]             <br />Volume: 3618.261<br />.model: ARIMA(3,1,2)(0,0,2)[12]","Month: 2023 Jun<br />interaction(format(.model), sep = \"/\"): ARIMA(3,1,2)(0,0,2)[12]             <br />Volume: 3230.886<br />.model: ARIMA(3,1,2)(0,0,2)[12]","Month: 2023 Jul<br />interaction(format(.model), sep = \"/\"): ARIMA(3,1,2)(0,0,2)[12]             <br />Volume: 3256.597<br />.model: ARIMA(3,1,2)(0,0,2)[12]","Month: 2023 Aug<br />interaction(format(.model), sep = \"/\"): ARIMA(3,1,2)(0,0,2)[12]             <br />Volume: 2866.071<br />.model: ARIMA(3,1,2)(0,0,2)[12]","Month: 2023 Sep<br />interaction(format(.model), sep = \"/\"): ARIMA(3,1,2)(0,0,2)[12]             <br />Volume: 3278.683<br />.model: ARIMA(3,1,2)(0,0,2)[12]","Month: 2023 Oct<br />interaction(format(.model), sep = \"/\"): ARIMA(3,1,2)(0,0,2)[12]             <br />Volume: 3579.311<br />.model: ARIMA(3,1,2)(0,0,2)[12]","Month: 2023 Nov<br />interaction(format(.model), sep = \"/\"): ARIMA(3,1,2)(0,0,2)[12]             <br />Volume: 2753.464<br />.model: ARIMA(3,1,2)(0,0,2)[12]"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(0,191,196,1)","dash":"solid"},"hoveron":"points","name":"ARIMA(3,1,2)(0,0,2)[12]","legendgroup":"ARIMA(3,1,2)(0,0,2)[12]","showlegend":true,"xaxis":"x","yaxis":"y2","hoverinfo":"text","frame":null},{"x":[19389,19417,19448,19478,19509,19539,19570,19601,19631,19662],"y":[3452.3191859530521,3825.9456993730701,4025.9884511920886,3918.4793509397318,3921.6237849338836,3746.7351854403064,3227.7181536227004,3635.9650684333255,3911.3336954304978,3203.2951622156543],"text":["Month: 2023 Feb<br />interaction(format(.model), sep = \"/\"): ARIMA(8,1,0)(0,0,2)[12] c/ tendencia<br />Volume: 3452.319<br />.model: ARIMA(8,1,0)(0,0,2)[12] c/ tendencia","Month: 2023 Mar<br />interaction(format(.model), sep = \"/\"): ARIMA(8,1,0)(0,0,2)[12] c/ tendencia<br />Volume: 3825.946<br />.model: ARIMA(8,1,0)(0,0,2)[12] c/ tendencia","Month: 2023 Apr<br />interaction(format(.model), sep = \"/\"): ARIMA(8,1,0)(0,0,2)[12] c/ tendencia<br />Volume: 4025.988<br />.model: ARIMA(8,1,0)(0,0,2)[12] c/ tendencia","Month: 2023 May<br />interaction(format(.model), sep = \"/\"): ARIMA(8,1,0)(0,0,2)[12] c/ tendencia<br />Volume: 3918.479<br />.model: ARIMA(8,1,0)(0,0,2)[12] c/ tendencia","Month: 2023 Jun<br />interaction(format(.model), sep = \"/\"): ARIMA(8,1,0)(0,0,2)[12] c/ tendencia<br />Volume: 3921.624<br />.model: ARIMA(8,1,0)(0,0,2)[12] c/ tendencia","Month: 2023 Jul<br />interaction(format(.model), sep = \"/\"): ARIMA(8,1,0)(0,0,2)[12] c/ tendencia<br />Volume: 3746.735<br />.model: ARIMA(8,1,0)(0,0,2)[12] c/ tendencia","Month: 2023 Aug<br />interaction(format(.model), sep = \"/\"): ARIMA(8,1,0)(0,0,2)[12] c/ tendencia<br />Volume: 3227.718<br />.model: ARIMA(8,1,0)(0,0,2)[12] c/ tendencia","Month: 2023 Sep<br />interaction(format(.model), sep = \"/\"): ARIMA(8,1,0)(0,0,2)[12] c/ tendencia<br />Volume: 3635.965<br />.model: ARIMA(8,1,0)(0,0,2)[12] c/ tendencia","Month: 2023 Oct<br />interaction(format(.model), sep = \"/\"): ARIMA(8,1,0)(0,0,2)[12] c/ tendencia<br />Volume: 3911.334<br />.model: ARIMA(8,1,0)(0,0,2)[12] c/ tendencia","Month: 2023 Nov<br />interaction(format(.model), sep = \"/\"): ARIMA(8,1,0)(0,0,2)[12] c/ tendencia<br />Volume: 3203.295<br />.model: ARIMA(8,1,0)(0,0,2)[12] c/ tendencia"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(199,124,255,1)","dash":"solid"},"hoveron":"points","name":"ARIMA(8,1,0)(0,0,2)[12] c/ tendencia","legendgroup":"ARIMA(8,1,0)(0,0,2)[12] c/ tendencia","showlegend":true,"xaxis":"x2","yaxis":"y2","hoverinfo":"text","frame":null},{"x":[18628,18659,18687,18718,18748,18779,18809,18840,18871,18901,18932,18962,18993,19024,19052,19083,19113,19144,19174,19205,19236,19266,19297,19327,19358,19389,19417,19448,19478,19509,19539,19570,19601,19631,19662],"y":[4412.3353034387201,3727.1616538272001,3569.9044871071201,3558.23449934664,4671.4607829398401,3120.6949342539197,2787.04210737528,3715.1196072287203,3110.3941819842398,4007.7156812331195,3119.9896621968001,3471.8348394970399,4938.0635269804789,3694.1409817646399,3652.4590611804797,3779.6165431685595,4464.4821085577596,3324.0698065882402,3798.4559607218398,2927.3919951689595,3103.2008887163202,3578.8132970704801,2772.8868572953597,2945.3883167359199,4489.6456781399993,3274.1817308720001,3502.7699000795201,4401.4067843769599,3485.3126816763997,3164.0916593940801,3856.3099556391999,3100.7418757659198,2846.6256984837596,3700.2450101319196,3257.6429727659997],"text":["Month: 2021 Jan<br />Volume: 4412.335","Month: 2021 Feb<br />Volume: 3727.162","Month: 2021 Mar<br />Volume: 3569.904","Month: 2021 Apr<br />Volume: 3558.234","Month: 2021 May<br />Volume: 4671.461","Month: 2021 Jun<br />Volume: 3120.695","Month: 2021 Jul<br />Volume: 2787.042","Month: 2021 Aug<br />Volume: 3715.120","Month: 2021 Sep<br />Volume: 3110.394","Month: 2021 Oct<br />Volume: 4007.716","Month: 2021 Nov<br />Volume: 3119.990","Month: 2021 Dec<br />Volume: 3471.835","Month: 2022 Jan<br />Volume: 4938.064","Month: 2022 Feb<br />Volume: 3694.141","Month: 2022 Mar<br />Volume: 3652.459","Month: 2022 Apr<br />Volume: 3779.617","Month: 2022 May<br />Volume: 4464.482","Month: 2022 Jun<br />Volume: 3324.070","Month: 2022 Jul<br />Volume: 3798.456","Month: 2022 Aug<br />Volume: 2927.392","Month: 2022 Sep<br />Volume: 3103.201","Month: 2022 Oct<br />Volume: 3578.813","Month: 2022 Nov<br />Volume: 2772.887","Month: 2022 Dec<br />Volume: 2945.388","Month: 2023 Jan<br />Volume: 4489.646","Month: 2023 Feb<br />Volume: 3274.182","Month: 2023 Mar<br />Volume: 3502.770","Month: 2023 Apr<br />Volume: 4401.407","Month: 2023 May<br />Volume: 3485.313","Month: 2023 Jun<br />Volume: 3164.092","Month: 2023 Jul<br />Volume: 3856.310","Month: 2023 Aug<br />Volume: 3100.742","Month: 2023 Sep<br />Volume: 2846.626","Month: 2023 Oct<br />Volume: 3700.245","Month: 2023 Nov<br />Volume: 3257.643"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[18628,18659,18687,18718,18748,18779,18809,18840,18871,18901,18932,18962,18993,19024,19052,19083,19113,19144,19174,19205,19236,19266,19297,19327,19358,19389,19417,19448,19478,19509,19539,19570,19601,19631,19662],"y":[4412.3353034387201,3727.1616538272001,3569.9044871071201,3558.23449934664,4671.4607829398401,3120.6949342539197,2787.04210737528,3715.1196072287203,3110.3941819842398,4007.7156812331195,3119.9896621968001,3471.8348394970399,4938.0635269804789,3694.1409817646399,3652.4590611804797,3779.6165431685595,4464.4821085577596,3324.0698065882402,3798.4559607218398,2927.3919951689595,3103.2008887163202,3578.8132970704801,2772.8868572953597,2945.3883167359199,4489.6456781399993,3274.1817308720001,3502.7699000795201,4401.4067843769599,3485.3126816763997,3164.0916593940801,3856.3099556391999,3100.7418757659198,2846.6256984837596,3700.2450101319196,3257.6429727659997],"text":["Month: 2021 Jan<br />Volume: 4412.335","Month: 2021 Feb<br />Volume: 3727.162","Month: 2021 Mar<br />Volume: 3569.904","Month: 2021 Apr<br />Volume: 3558.234","Month: 2021 May<br />Volume: 4671.461","Month: 2021 Jun<br />Volume: 3120.695","Month: 2021 Jul<br />Volume: 2787.042","Month: 2021 Aug<br />Volume: 3715.120","Month: 2021 Sep<br />Volume: 3110.394","Month: 2021 Oct<br />Volume: 4007.716","Month: 2021 Nov<br />Volume: 3119.990","Month: 2021 Dec<br />Volume: 3471.835","Month: 2022 Jan<br />Volume: 4938.064","Month: 2022 Feb<br />Volume: 3694.141","Month: 2022 Mar<br />Volume: 3652.459","Month: 2022 Apr<br />Volume: 3779.617","Month: 2022 May<br />Volume: 4464.482","Month: 2022 Jun<br />Volume: 3324.070","Month: 2022 Jul<br />Volume: 3798.456","Month: 2022 Aug<br />Volume: 2927.392","Month: 2022 Sep<br />Volume: 3103.201","Month: 2022 Oct<br />Volume: 3578.813","Month: 2022 Nov<br />Volume: 2772.887","Month: 2022 Dec<br />Volume: 2945.388","Month: 2023 Jan<br />Volume: 4489.646","Month: 2023 Feb<br />Volume: 3274.182","Month: 2023 Mar<br />Volume: 3502.770","Month: 2023 Apr<br />Volume: 4401.407","Month: 2023 May<br />Volume: 3485.313","Month: 2023 Jun<br />Volume: 3164.092","Month: 2023 Jul<br />Volume: 3856.310","Month: 2023 Aug<br />Volume: 3100.742","Month: 2023 Sep<br />Volume: 2846.626","Month: 2023 Oct<br />Volume: 3700.245","Month: 2023 Nov<br />Volume: 3257.643"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"x":[18628,18659,18687,18718,18748,18779,18809,18840,18871,18901,18932,18962,18993,19024,19052,19083,19113,19144,19174,19205,19236,19266,19297,19327,19358,19389,19417,19448,19478,19509,19539,19570,19601,19631,19662],"y":[4412.3353034387201,3727.1616538272001,3569.9044871071201,3558.23449934664,4671.4607829398401,3120.6949342539197,2787.04210737528,3715.1196072287203,3110.3941819842398,4007.7156812331195,3119.9896621968001,3471.8348394970399,4938.0635269804789,3694.1409817646399,3652.4590611804797,3779.6165431685595,4464.4821085577596,3324.0698065882402,3798.4559607218398,2927.3919951689595,3103.2008887163202,3578.8132970704801,2772.8868572953597,2945.3883167359199,4489.6456781399993,3274.1817308720001,3502.7699000795201,4401.4067843769599,3485.3126816763997,3164.0916593940801,3856.3099556391999,3100.7418757659198,2846.6256984837596,3700.2450101319196,3257.6429727659997],"text":["Month: 2021 Jan<br />Volume: 4412.335","Month: 2021 Feb<br />Volume: 3727.162","Month: 2021 Mar<br />Volume: 3569.904","Month: 2021 Apr<br />Volume: 3558.234","Month: 2021 May<br />Volume: 4671.461","Month: 2021 Jun<br />Volume: 3120.695","Month: 2021 Jul<br />Volume: 2787.042","Month: 2021 Aug<br />Volume: 3715.120","Month: 2021 Sep<br />Volume: 3110.394","Month: 2021 Oct<br />Volume: 4007.716","Month: 2021 Nov<br />Volume: 3119.990","Month: 2021 Dec<br />Volume: 3471.835","Month: 2022 Jan<br />Volume: 4938.064","Month: 2022 Feb<br />Volume: 3694.141","Month: 2022 Mar<br />Volume: 3652.459","Month: 2022 Apr<br />Volume: 3779.617","Month: 2022 May<br />Volume: 4464.482","Month: 2022 Jun<br />Volume: 3324.070","Month: 2022 Jul<br />Volume: 3798.456","Month: 2022 Aug<br />Volume: 2927.392","Month: 2022 Sep<br />Volume: 3103.201","Month: 2022 Oct<br />Volume: 3578.813","Month: 2022 Nov<br />Volume: 2772.887","Month: 2022 Dec<br />Volume: 2945.388","Month: 2023 Jan<br />Volume: 4489.646","Month: 2023 Feb<br />Volume: 3274.182","Month: 2023 Mar<br />Volume: 3502.770","Month: 2023 Apr<br />Volume: 4401.407","Month: 2023 May<br />Volume: 3485.313","Month: 2023 Jun<br />Volume: 3164.092","Month: 2023 Jul<br />Volume: 3856.310","Month: 2023 Aug<br />Volume: 3100.742","Month: 2023 Sep<br />Volume: 2846.626","Month: 2023 Oct<br />Volume: 3700.245","Month: 2023 Nov<br />Volume: 3257.643"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y2","hoverinfo":"text","frame":null},{"x":[18628,18659,18687,18718,18748,18779,18809,18840,18871,18901,18932,18962,18993,19024,19052,19083,19113,19144,19174,19205,19236,19266,19297,19327,19358,19389,19417,19448,19478,19509,19539,19570,19601,19631,19662],"y":[4412.3353034387201,3727.1616538272001,3569.9044871071201,3558.23449934664,4671.4607829398401,3120.6949342539197,2787.04210737528,3715.1196072287203,3110.3941819842398,4007.7156812331195,3119.9896621968001,3471.8348394970399,4938.0635269804789,3694.1409817646399,3652.4590611804797,3779.6165431685595,4464.4821085577596,3324.0698065882402,3798.4559607218398,2927.3919951689595,3103.2008887163202,3578.8132970704801,2772.8868572953597,2945.3883167359199,4489.6456781399993,3274.1817308720001,3502.7699000795201,4401.4067843769599,3485.3126816763997,3164.0916593940801,3856.3099556391999,3100.7418757659198,2846.6256984837596,3700.2450101319196,3257.6429727659997],"text":["Month: 2021 Jan<br />Volume: 4412.335","Month: 2021 Feb<br />Volume: 3727.162","Month: 2021 Mar<br />Volume: 3569.904","Month: 2021 Apr<br />Volume: 3558.234","Month: 2021 May<br />Volume: 4671.461","Month: 2021 Jun<br />Volume: 3120.695","Month: 2021 Jul<br />Volume: 2787.042","Month: 2021 Aug<br />Volume: 3715.120","Month: 2021 Sep<br />Volume: 3110.394","Month: 2021 Oct<br />Volume: 4007.716","Month: 2021 Nov<br />Volume: 3119.990","Month: 2021 Dec<br />Volume: 3471.835","Month: 2022 Jan<br />Volume: 4938.064","Month: 2022 Feb<br />Volume: 3694.141","Month: 2022 Mar<br />Volume: 3652.459","Month: 2022 Apr<br />Volume: 3779.617","Month: 2022 May<br />Volume: 4464.482","Month: 2022 Jun<br />Volume: 3324.070","Month: 2022 Jul<br />Volume: 3798.456","Month: 2022 Aug<br />Volume: 2927.392","Month: 2022 Sep<br />Volume: 3103.201","Month: 2022 Oct<br />Volume: 3578.813","Month: 2022 Nov<br />Volume: 2772.887","Month: 2022 Dec<br />Volume: 2945.388","Month: 2023 Jan<br />Volume: 4489.646","Month: 2023 Feb<br />Volume: 3274.182","Month: 2023 Mar<br />Volume: 3502.770","Month: 2023 Apr<br />Volume: 4401.407","Month: 2023 May<br />Volume: 3485.313","Month: 2023 Jun<br />Volume: 3164.092","Month: 2023 Jul<br />Volume: 3856.310","Month: 2023 Aug<br />Volume: 3100.742","Month: 2023 Sep<br />Volume: 2846.626","Month: 2023 Oct<br />Volume: 3700.245","Month: 2023 Nov<br />Volume: 3257.643"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x2","yaxis":"y2","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":55.452054794520549,"r":7.3059360730593621,"b":25.570776255707766,"l":48.949771689497723},"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"title":{"text":"Forecasting with ARIMA Models","font":{"color":"rgba(0,0,0,1)","family":"","size":17.534246575342465},"x":0,"xref":"paper"},"xaxis":{"domain":[0,0.49592302674494454],"automargin":true,"type":"linear","autorange":false,"range":[18576.299999999999,19713.700000000001],"tickmode":"array","ticktext":["2021 Jan","2022 Jan","2023 Jan"],"tickvals":[18628,18993,19358],"categoryorder":"array","categoryarray":["2021 Jan","2022 Jan","2023 Jan"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y2","title":"","hoverformat":".2f"},"yaxis":{"domain":[0.51484018264840181,1],"automargin":true,"type":"linear","autorange":false,"range":[2440.2441642933668,5057.0073061560561],"tickmode":"array","ticktext":["2500","3000","3500","4000","4500","5000"],"tickvals":[2500,3000,3500,4000,4500,5000],"categoryorder":"array","categoryarray":["2500","3000","3500","4000","4500","5000"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":"","hoverformat":".2f"},"annotations":[{"text":"Volume","x":0,"y":0.5,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"xref":"paper","yref":"paper","textangle":-90,"xanchor":"right","yanchor":"center","annotationType":"axis","xshift":-33.607305936073068},{"text":"ARIMA(1,1,9)(0,0,2)[12]","x":0.24796151337247227,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.68949771689498},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"ARIMA(1,1,9)(1,1,0)[12]","x":0.7520384866275277,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.68949771689498},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"ARIMA(3,1,2)(0,0,2)[12]","x":0.24796151337247227,"y":0.48515981735159819,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.68949771689498},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"ARIMA(8,1,0)(0,0,2)[12] c/ tendencia","x":0.7520384866275277,"y":0.48515981735159819,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.68949771689498},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"}],"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":0.49592302674494454,"y0":0.51484018264840181,"y1":1},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"transparent","width":0.66417600664176002,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":0.49592302674494454,"y0":0,"y1":23.37899543378996,"yanchor":1,"ysizemode":"pixel"},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0.5040769732550554,"x1":1,"y0":0.51484018264840181,"y1":1},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"transparent","width":0.66417600664176002,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.5040769732550554,"x1":1,"y0":0,"y1":23.37899543378996,"yanchor":1,"ysizemode":"pixel"},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":0.49592302674494454,"y0":0,"y1":0.48515981735159819},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"transparent","width":0.66417600664176002,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":0.49592302674494454,"y0":0,"y1":23.37899543378996,"yanchor":0.48515981735159819,"ysizemode":"pixel"},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0.5040769732550554,"x1":1,"y0":0,"y1":0.48515981735159819},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"transparent","width":0.66417600664176002,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.5040769732550554,"x1":1,"y0":0,"y1":23.37899543378996,"yanchor":0.48515981735159819,"ysizemode":"pixel"}],"xaxis2":{"type":"linear","autorange":false,"range":[18576.299999999999,19713.700000000001],"tickmode":"array","ticktext":["2021 Jan","2022 Jan","2023 Jan"],"tickvals":[18628,18993,19358],"categoryorder":"array","categoryarray":["2021 Jan","2022 Jan","2023 Jan"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0.5040769732550554,1],"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y2","title":"","hoverformat":".2f"},"yaxis2":{"type":"linear","autorange":false,"range":[2440.2441642933668,5057.0073061560561],"tickmode":"array","ticktext":["2500","3000","3500","4000","4500","5000"],"tickvals":[2500,3000,3500,4000,4500,5000],"categoryorder":"array","categoryarray":["2500","3000","3500","4000","4500","5000"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0,0.48515981735159819],"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":"","hoverformat":".2f"},"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.8897637795275593,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"84c01dc0c1b":{"x":{},"y":{},"colour":{},"type":"scatter"},"84c066876176":{"x":{},"y":{}}},"cur_data":"84c01dc0c1b","visdat":{"84c01dc0c1b":["function (y) ","x"],"84c066876176":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p><sup>Note:&nbsp;You&nbsp;can&nbsp;hover&nbsp;the&nbsp;cursor&nbsp;over&nbsp;the&nbsp;graph&nbsp;to&nbsp;see&nbsp;the&nbsp;values&nbsp;of&nbsp;each&nbsp;point.</sup></p>
<p>Their confidence intervals were also plotted.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting individual models with confidence intervals</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>mod_arima_pg <span class="sc">%&gt;%</span> <span class="fu">forecast</span>(<span class="at">h =</span> pap) <span class="sc">%&gt;%</span></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">autoplot</span>(</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>    serie <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Month <span class="sc">&gt;=</span> <span class="fu">yearmonth</span>(<span class="st">"2019-01-01"</span>)),</span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">lwd =</span> <span class="fl">1.5</span>,</span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Forecasting with ARIMA Models"</span>, <span class="at">x =</span> <span class="st">""</span>,</span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">"80% and 95% confidence intervals"</span>) <span class="sc">+</span></span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">'none'</span>)  <span class="sc">+</span></span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="fu">vars</span>(.model), <span class="at">scales =</span> <span class="st">"free"</span>, <span class="at">ncol =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="english_files/figure-html/unnamed-chunk-29-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="forecasting-with-stl-decomposition" class="level2">
<h2 class="anchored" data-anchor-id="forecasting-with-stl-decomposition">FORECASTING WITH STL DECOMPOSITION</h2>
<p>Afterwards, the STL Decomposition model was reviewed, which uses the previously used method to decompose the series, to subsequently deseasonalize the series and apply a seasonal component by means of some other method, such as exponential smoothing (ETS). Since only one method is used, in this case we go directly to the residual analysis.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Estimate Model (ETS)</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>mod_stl <span class="ot">=</span> train_data <span class="sc">%&gt;%</span> </span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">model</span>(</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">dstl =</span> <span class="fu">decomposition_model</span>(</span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>      <span class="fu">STL</span>(<span class="fu">box_cox</span>(Volume,lambda)), <span class="co">#Decomposition method</span></span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>      <span class="fu">ETS</span>(season_adjust), <span class="co">#Seasonally adjusted series</span></span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a>      <span class="fu">ETS</span>(season_year) <span class="co">#Seasonal component</span></span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="model-validation-2" class="level3">
<h3 class="anchored" data-anchor-id="model-validation-2">Model Validation</h3>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="english_files/figure-html/unnamed-chunk-31-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="english_files/figure-html/unnamed-chunk-31-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Jarque Bera Test

data:  residuals$.innov
X-squared = 0.81585, df = 2, p-value = 0.665</code></pre>
</div>
</div>
</section>
<section id="forecast-charts-2" class="level3">
<h3 class="anchored" data-anchor-id="forecast-charts-2">Forecast Charts</h3>
<p>Forecasts are made with confidence intervals with the assumption of normality and Bootstrap.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="english_files/figure-html/unnamed-chunk-32-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="forecasting-with-prophet" class="level2">
<h2 class="anchored" data-anchor-id="forecasting-with-prophet">FORECASTING WITH PROPHET</h2>
<p>Forecasts were also made with the Facebook Prophet model using different orders and looking at their accuracy to choose the best model.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Estimating Models</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">10</span>)</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>mod_prophet <span class="ot">=</span> train_data <span class="sc">%&gt;%</span> </span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">model</span>(</span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Order = 10</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">prophet</span>(Volume <span class="sc">~</span> <span class="fu">season</span>(</span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">period=</span><span class="st">"year"</span>, <span class="at">order =</span> <span class="dv">10</span>, <span class="at">type =</span> <span class="st">"multiplicative"</span>)),</span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Order = 5</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">prophet</span>(Volume <span class="sc">~</span> <span class="fu">season</span>(</span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">period=</span><span class="st">"year"</span>, <span class="at">order =</span> <span class="dv">5</span>, <span class="at">type =</span> <span class="st">"multiplicative"</span>)),</span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Order = 3</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">prophet</span>(Volume <span class="sc">~</span> <span class="fu">season</span>(</span>
<span id="cb44-10"><a href="#cb44-10" aria-hidden="true" tabindex="-1"></a>      <span class="at">period=</span><span class="st">"year"</span>, <span class="at">order =</span> <span class="dv">3</span>, <span class="at">type =</span> <span class="st">"multiplicative"</span>)),</span>
<span id="cb44-11"><a href="#cb44-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Order = 2</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">prophet</span>(Volume <span class="sc">~</span> <span class="fu">season</span>(</span>
<span id="cb44-12"><a href="#cb44-12" aria-hidden="true" tabindex="-1"></a>      <span class="at">period=</span><span class="st">"year"</span>, <span class="at">order =</span> <span class="dv">2</span>, <span class="at">type =</span> <span class="st">"multiplicative"</span>))</span>
<span id="cb44-13"><a href="#cb44-13" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb44-14"><a href="#cb44-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-15"><a href="#cb44-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Forecast Accuracy</span></span>
<span id="cb44-16"><a href="#cb44-16" aria-hidden="true" tabindex="-1"></a>mod_prophet <span class="sc">%&gt;%</span> <span class="fu">forecast</span>(<span class="at">h =</span> pap) <span class="sc">%&gt;%</span> <span class="fu">accuracy</span>(test_data) <span class="sc">%&gt;%</span> </span>
<span id="cb44-17"><a href="#cb44-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(.model,RMSE,MAE,MAPE) <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(MAPE)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 4
  .model      RMSE   MAE  MAPE
  &lt;chr&gt;      &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 Order = 10  748.  579.  17.8
2 Order = 5   738.  619.  18.9
3 Order = 2   761.  651.  20.0
4 Order = 3   788.  652.  20.1</code></pre>
</div>
</div>
<p>Once the best model has been identified, it is validated.</p>
<section id="model-validation-3" class="level3">
<h3 class="anchored" data-anchor-id="model-validation-3">Model Validation</h3>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="english_files/figure-html/unnamed-chunk-34-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="english_files/figure-html/unnamed-chunk-34-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Jarque Bera Test

data:  residuals$.innov
X-squared = 1.5829, df = 2, p-value = 0.4532</code></pre>
</div>
</div>
</section>
<section id="forecast-charts-3" class="level3">
<h3 class="anchored" data-anchor-id="forecast-charts-3">Forecast Charts</h3>
<p>The forecasts of the main models were plotted for comparison.</p>
<div class="cell">
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-0659143786b800f18b1b" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-0659143786b800f18b1b">{"x":{"data":[{"x":[19389,19417,19448,19478,19509,19539,19570,19601,19631,19662],"y":[3913.3504018715594,4839.8025680637566,4571.0164424550849,4309.1581958606466,4122.0585420994157,3808.7650500430564,3339.7947876501535,4128.3749584574207,3978.8820855311806,3281.0446446957535],"text":["Month: 2023 Feb<br />interaction(format(.model), sep = \"/\"): Order = 10<br />Volume: 3913.350<br />.model: Order = 10","Month: 2023 Mar<br />interaction(format(.model), sep = \"/\"): Order = 10<br />Volume: 4839.803<br />.model: Order = 10","Month: 2023 Apr<br />interaction(format(.model), sep = \"/\"): Order = 10<br />Volume: 4571.016<br />.model: Order = 10","Month: 2023 May<br />interaction(format(.model), sep = \"/\"): Order = 10<br />Volume: 4309.158<br />.model: Order = 10","Month: 2023 Jun<br />interaction(format(.model), sep = \"/\"): Order = 10<br />Volume: 4122.059<br />.model: Order = 10","Month: 2023 Jul<br />interaction(format(.model), sep = \"/\"): Order = 10<br />Volume: 3808.765<br />.model: Order = 10","Month: 2023 Aug<br />interaction(format(.model), sep = \"/\"): Order = 10<br />Volume: 3339.795<br />.model: Order = 10","Month: 2023 Sep<br />interaction(format(.model), sep = \"/\"): Order = 10<br />Volume: 4128.375<br />.model: Order = 10","Month: 2023 Oct<br />interaction(format(.model), sep = \"/\"): Order = 10<br />Volume: 3978.882<br />.model: Order = 10","Month: 2023 Nov<br />interaction(format(.model), sep = \"/\"): Order = 10<br />Volume: 3281.045<br />.model: Order = 10"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(248,118,109,1)","dash":"solid"},"hoveron":"points","name":"Order = 10","legendgroup":"Order = 10","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[19389,19417,19448,19478,19509,19539,19570,19601,19631,19662],"y":[4349.4449958646937,4549.9043224079951,4566.6934194773949,4427.5806434575788,4191.6637667178993,3983.4585837725272,3824.0766832485538,3710.5301850725027,3693.8502471700704,3791.5148949326563],"text":["Month: 2023 Feb<br />interaction(format(.model), sep = \"/\"): Order = 2 <br />Volume: 4349.445<br />.model: Order = 2","Month: 2023 Mar<br />interaction(format(.model), sep = \"/\"): Order = 2 <br />Volume: 4549.904<br />.model: Order = 2","Month: 2023 Apr<br />interaction(format(.model), sep = \"/\"): Order = 2 <br />Volume: 4566.693<br />.model: Order = 2","Month: 2023 May<br />interaction(format(.model), sep = \"/\"): Order = 2 <br />Volume: 4427.581<br />.model: Order = 2","Month: 2023 Jun<br />interaction(format(.model), sep = \"/\"): Order = 2 <br />Volume: 4191.664<br />.model: Order = 2","Month: 2023 Jul<br />interaction(format(.model), sep = \"/\"): Order = 2 <br />Volume: 3983.459<br />.model: Order = 2","Month: 2023 Aug<br />interaction(format(.model), sep = \"/\"): Order = 2 <br />Volume: 3824.077<br />.model: Order = 2","Month: 2023 Sep<br />interaction(format(.model), sep = \"/\"): Order = 2 <br />Volume: 3710.530<br />.model: Order = 2","Month: 2023 Oct<br />interaction(format(.model), sep = \"/\"): Order = 2 <br />Volume: 3693.850<br />.model: Order = 2","Month: 2023 Nov<br />interaction(format(.model), sep = \"/\"): Order = 2 <br />Volume: 3791.515<br />.model: Order = 2"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(124,174,0,1)","dash":"solid"},"hoveron":"points","name":"Order = 2","legendgroup":"Order = 2","showlegend":true,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"x":[19389,19417,19448,19478,19509,19539,19570,19601,19631,19662],"y":[4368.0990115587456,4308.3281270077841,4538.1542086093941,4670.1568609158849,4239.9861467452938,3758.7783019098247,3787.8712230689921,3942.2192766829412,3733.4634699823164,3567.3607413490727],"text":["Month: 2023 Feb<br />interaction(format(.model), sep = \"/\"): Order = 3 <br />Volume: 4368.099<br />.model: Order = 3","Month: 2023 Mar<br />interaction(format(.model), sep = \"/\"): Order = 3 <br />Volume: 4308.328<br />.model: Order = 3","Month: 2023 Apr<br />interaction(format(.model), sep = \"/\"): Order = 3 <br />Volume: 4538.154<br />.model: Order = 3","Month: 2023 May<br />interaction(format(.model), sep = \"/\"): Order = 3 <br />Volume: 4670.157<br />.model: Order = 3","Month: 2023 Jun<br />interaction(format(.model), sep = \"/\"): Order = 3 <br />Volume: 4239.986<br />.model: Order = 3","Month: 2023 Jul<br />interaction(format(.model), sep = \"/\"): Order = 3 <br />Volume: 3758.778<br />.model: Order = 3","Month: 2023 Aug<br />interaction(format(.model), sep = \"/\"): Order = 3 <br />Volume: 3787.871<br />.model: Order = 3","Month: 2023 Sep<br />interaction(format(.model), sep = \"/\"): Order = 3 <br />Volume: 3942.219<br />.model: Order = 3","Month: 2023 Oct<br />interaction(format(.model), sep = \"/\"): Order = 3 <br />Volume: 3733.463<br />.model: Order = 3","Month: 2023 Nov<br />interaction(format(.model), sep = \"/\"): Order = 3 <br />Volume: 3567.361<br />.model: Order = 3"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(0,191,196,1)","dash":"solid"},"hoveron":"points","name":"Order = 3","legendgroup":"Order = 3","showlegend":true,"xaxis":"x","yaxis":"y2","hoverinfo":"text","frame":null},{"x":[19389,19417,19448,19478,19509,19539,19570,19601,19631,19662],"y":[4184.9561051991241,4358.5380284277999,4524.0442360372881,4762.1845707972243,4090.6933614440145,3849.9692376900739,3893.1915475482551,3610.8160965204015,4063.3252554984629,3432.6237491870725],"text":["Month: 2023 Feb<br />interaction(format(.model), sep = \"/\"): Order = 5 <br />Volume: 4184.956<br />.model: Order = 5","Month: 2023 Mar<br />interaction(format(.model), sep = \"/\"): Order = 5 <br />Volume: 4358.538<br />.model: Order = 5","Month: 2023 Apr<br />interaction(format(.model), sep = \"/\"): Order = 5 <br />Volume: 4524.044<br />.model: Order = 5","Month: 2023 May<br />interaction(format(.model), sep = \"/\"): Order = 5 <br />Volume: 4762.185<br />.model: Order = 5","Month: 2023 Jun<br />interaction(format(.model), sep = \"/\"): Order = 5 <br />Volume: 4090.693<br />.model: Order = 5","Month: 2023 Jul<br />interaction(format(.model), sep = \"/\"): Order = 5 <br />Volume: 3849.969<br />.model: Order = 5","Month: 2023 Aug<br />interaction(format(.model), sep = \"/\"): Order = 5 <br />Volume: 3893.192<br />.model: Order = 5","Month: 2023 Sep<br />interaction(format(.model), sep = \"/\"): Order = 5 <br />Volume: 3610.816<br />.model: Order = 5","Month: 2023 Oct<br />interaction(format(.model), sep = \"/\"): Order = 5 <br />Volume: 4063.325<br />.model: Order = 5","Month: 2023 Nov<br />interaction(format(.model), sep = \"/\"): Order = 5 <br />Volume: 3432.624<br />.model: Order = 5"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(199,124,255,1)","dash":"solid"},"hoveron":"points","name":"Order = 5","legendgroup":"Order = 5","showlegend":true,"xaxis":"x2","yaxis":"y2","hoverinfo":"text","frame":null},{"x":[18628,18659,18687,18718,18748,18779,18809,18840,18871,18901,18932,18962,18993,19024,19052,19083,19113,19144,19174,19205,19236,19266,19297,19327,19358,19389,19417,19448,19478,19509,19539,19570,19601,19631,19662],"y":[4412.3353034387201,3727.1616538272001,3569.9044871071201,3558.23449934664,4671.4607829398401,3120.6949342539197,2787.04210737528,3715.1196072287203,3110.3941819842398,4007.7156812331195,3119.9896621968001,3471.8348394970399,4938.0635269804789,3694.1409817646399,3652.4590611804797,3779.6165431685595,4464.4821085577596,3324.0698065882402,3798.4559607218398,2927.3919951689595,3103.2008887163202,3578.8132970704801,2772.8868572953597,2945.3883167359199,4489.6456781399993,3274.1817308720001,3502.7699000795201,4401.4067843769599,3485.3126816763997,3164.0916593940801,3856.3099556391999,3100.7418757659198,2846.6256984837596,3700.2450101319196,3257.6429727659997],"text":["Month: 2021 Jan<br />Volume: 4412.335","Month: 2021 Feb<br />Volume: 3727.162","Month: 2021 Mar<br />Volume: 3569.904","Month: 2021 Apr<br />Volume: 3558.234","Month: 2021 May<br />Volume: 4671.461","Month: 2021 Jun<br />Volume: 3120.695","Month: 2021 Jul<br />Volume: 2787.042","Month: 2021 Aug<br />Volume: 3715.120","Month: 2021 Sep<br />Volume: 3110.394","Month: 2021 Oct<br />Volume: 4007.716","Month: 2021 Nov<br />Volume: 3119.990","Month: 2021 Dec<br />Volume: 3471.835","Month: 2022 Jan<br />Volume: 4938.064","Month: 2022 Feb<br />Volume: 3694.141","Month: 2022 Mar<br />Volume: 3652.459","Month: 2022 Apr<br />Volume: 3779.617","Month: 2022 May<br />Volume: 4464.482","Month: 2022 Jun<br />Volume: 3324.070","Month: 2022 Jul<br />Volume: 3798.456","Month: 2022 Aug<br />Volume: 2927.392","Month: 2022 Sep<br />Volume: 3103.201","Month: 2022 Oct<br />Volume: 3578.813","Month: 2022 Nov<br />Volume: 2772.887","Month: 2022 Dec<br />Volume: 2945.388","Month: 2023 Jan<br />Volume: 4489.646","Month: 2023 Feb<br />Volume: 3274.182","Month: 2023 Mar<br />Volume: 3502.770","Month: 2023 Apr<br />Volume: 4401.407","Month: 2023 May<br />Volume: 3485.313","Month: 2023 Jun<br />Volume: 3164.092","Month: 2023 Jul<br />Volume: 3856.310","Month: 2023 Aug<br />Volume: 3100.742","Month: 2023 Sep<br />Volume: 2846.626","Month: 2023 Oct<br />Volume: 3700.245","Month: 2023 Nov<br />Volume: 3257.643"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[18628,18659,18687,18718,18748,18779,18809,18840,18871,18901,18932,18962,18993,19024,19052,19083,19113,19144,19174,19205,19236,19266,19297,19327,19358,19389,19417,19448,19478,19509,19539,19570,19601,19631,19662],"y":[4412.3353034387201,3727.1616538272001,3569.9044871071201,3558.23449934664,4671.4607829398401,3120.6949342539197,2787.04210737528,3715.1196072287203,3110.3941819842398,4007.7156812331195,3119.9896621968001,3471.8348394970399,4938.0635269804789,3694.1409817646399,3652.4590611804797,3779.6165431685595,4464.4821085577596,3324.0698065882402,3798.4559607218398,2927.3919951689595,3103.2008887163202,3578.8132970704801,2772.8868572953597,2945.3883167359199,4489.6456781399993,3274.1817308720001,3502.7699000795201,4401.4067843769599,3485.3126816763997,3164.0916593940801,3856.3099556391999,3100.7418757659198,2846.6256984837596,3700.2450101319196,3257.6429727659997],"text":["Month: 2021 Jan<br />Volume: 4412.335","Month: 2021 Feb<br />Volume: 3727.162","Month: 2021 Mar<br />Volume: 3569.904","Month: 2021 Apr<br />Volume: 3558.234","Month: 2021 May<br />Volume: 4671.461","Month: 2021 Jun<br />Volume: 3120.695","Month: 2021 Jul<br />Volume: 2787.042","Month: 2021 Aug<br />Volume: 3715.120","Month: 2021 Sep<br />Volume: 3110.394","Month: 2021 Oct<br />Volume: 4007.716","Month: 2021 Nov<br />Volume: 3119.990","Month: 2021 Dec<br />Volume: 3471.835","Month: 2022 Jan<br />Volume: 4938.064","Month: 2022 Feb<br />Volume: 3694.141","Month: 2022 Mar<br />Volume: 3652.459","Month: 2022 Apr<br />Volume: 3779.617","Month: 2022 May<br />Volume: 4464.482","Month: 2022 Jun<br />Volume: 3324.070","Month: 2022 Jul<br />Volume: 3798.456","Month: 2022 Aug<br />Volume: 2927.392","Month: 2022 Sep<br />Volume: 3103.201","Month: 2022 Oct<br />Volume: 3578.813","Month: 2022 Nov<br />Volume: 2772.887","Month: 2022 Dec<br />Volume: 2945.388","Month: 2023 Jan<br />Volume: 4489.646","Month: 2023 Feb<br />Volume: 3274.182","Month: 2023 Mar<br />Volume: 3502.770","Month: 2023 Apr<br />Volume: 4401.407","Month: 2023 May<br />Volume: 3485.313","Month: 2023 Jun<br />Volume: 3164.092","Month: 2023 Jul<br />Volume: 3856.310","Month: 2023 Aug<br />Volume: 3100.742","Month: 2023 Sep<br />Volume: 2846.626","Month: 2023 Oct<br />Volume: 3700.245","Month: 2023 Nov<br />Volume: 3257.643"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"x":[18628,18659,18687,18718,18748,18779,18809,18840,18871,18901,18932,18962,18993,19024,19052,19083,19113,19144,19174,19205,19236,19266,19297,19327,19358,19389,19417,19448,19478,19509,19539,19570,19601,19631,19662],"y":[4412.3353034387201,3727.1616538272001,3569.9044871071201,3558.23449934664,4671.4607829398401,3120.6949342539197,2787.04210737528,3715.1196072287203,3110.3941819842398,4007.7156812331195,3119.9896621968001,3471.8348394970399,4938.0635269804789,3694.1409817646399,3652.4590611804797,3779.6165431685595,4464.4821085577596,3324.0698065882402,3798.4559607218398,2927.3919951689595,3103.2008887163202,3578.8132970704801,2772.8868572953597,2945.3883167359199,4489.6456781399993,3274.1817308720001,3502.7699000795201,4401.4067843769599,3485.3126816763997,3164.0916593940801,3856.3099556391999,3100.7418757659198,2846.6256984837596,3700.2450101319196,3257.6429727659997],"text":["Month: 2021 Jan<br />Volume: 4412.335","Month: 2021 Feb<br />Volume: 3727.162","Month: 2021 Mar<br />Volume: 3569.904","Month: 2021 Apr<br />Volume: 3558.234","Month: 2021 May<br />Volume: 4671.461","Month: 2021 Jun<br />Volume: 3120.695","Month: 2021 Jul<br />Volume: 2787.042","Month: 2021 Aug<br />Volume: 3715.120","Month: 2021 Sep<br />Volume: 3110.394","Month: 2021 Oct<br />Volume: 4007.716","Month: 2021 Nov<br />Volume: 3119.990","Month: 2021 Dec<br />Volume: 3471.835","Month: 2022 Jan<br />Volume: 4938.064","Month: 2022 Feb<br />Volume: 3694.141","Month: 2022 Mar<br />Volume: 3652.459","Month: 2022 Apr<br />Volume: 3779.617","Month: 2022 May<br />Volume: 4464.482","Month: 2022 Jun<br />Volume: 3324.070","Month: 2022 Jul<br />Volume: 3798.456","Month: 2022 Aug<br />Volume: 2927.392","Month: 2022 Sep<br />Volume: 3103.201","Month: 2022 Oct<br />Volume: 3578.813","Month: 2022 Nov<br />Volume: 2772.887","Month: 2022 Dec<br />Volume: 2945.388","Month: 2023 Jan<br />Volume: 4489.646","Month: 2023 Feb<br />Volume: 3274.182","Month: 2023 Mar<br />Volume: 3502.770","Month: 2023 Apr<br />Volume: 4401.407","Month: 2023 May<br />Volume: 3485.313","Month: 2023 Jun<br />Volume: 3164.092","Month: 2023 Jul<br />Volume: 3856.310","Month: 2023 Aug<br />Volume: 3100.742","Month: 2023 Sep<br />Volume: 2846.626","Month: 2023 Oct<br />Volume: 3700.245","Month: 2023 Nov<br />Volume: 3257.643"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y2","hoverinfo":"text","frame":null},{"x":[18628,18659,18687,18718,18748,18779,18809,18840,18871,18901,18932,18962,18993,19024,19052,19083,19113,19144,19174,19205,19236,19266,19297,19327,19358,19389,19417,19448,19478,19509,19539,19570,19601,19631,19662],"y":[4412.3353034387201,3727.1616538272001,3569.9044871071201,3558.23449934664,4671.4607829398401,3120.6949342539197,2787.04210737528,3715.1196072287203,3110.3941819842398,4007.7156812331195,3119.9896621968001,3471.8348394970399,4938.0635269804789,3694.1409817646399,3652.4590611804797,3779.6165431685595,4464.4821085577596,3324.0698065882402,3798.4559607218398,2927.3919951689595,3103.2008887163202,3578.8132970704801,2772.8868572953597,2945.3883167359199,4489.6456781399993,3274.1817308720001,3502.7699000795201,4401.4067843769599,3485.3126816763997,3164.0916593940801,3856.3099556391999,3100.7418757659198,2846.6256984837596,3700.2450101319196,3257.6429727659997],"text":["Month: 2021 Jan<br />Volume: 4412.335","Month: 2021 Feb<br />Volume: 3727.162","Month: 2021 Mar<br />Volume: 3569.904","Month: 2021 Apr<br />Volume: 3558.234","Month: 2021 May<br />Volume: 4671.461","Month: 2021 Jun<br />Volume: 3120.695","Month: 2021 Jul<br />Volume: 2787.042","Month: 2021 Aug<br />Volume: 3715.120","Month: 2021 Sep<br />Volume: 3110.394","Month: 2021 Oct<br />Volume: 4007.716","Month: 2021 Nov<br />Volume: 3119.990","Month: 2021 Dec<br />Volume: 3471.835","Month: 2022 Jan<br />Volume: 4938.064","Month: 2022 Feb<br />Volume: 3694.141","Month: 2022 Mar<br />Volume: 3652.459","Month: 2022 Apr<br />Volume: 3779.617","Month: 2022 May<br />Volume: 4464.482","Month: 2022 Jun<br />Volume: 3324.070","Month: 2022 Jul<br />Volume: 3798.456","Month: 2022 Aug<br />Volume: 2927.392","Month: 2022 Sep<br />Volume: 3103.201","Month: 2022 Oct<br />Volume: 3578.813","Month: 2022 Nov<br />Volume: 2772.887","Month: 2022 Dec<br />Volume: 2945.388","Month: 2023 Jan<br />Volume: 4489.646","Month: 2023 Feb<br />Volume: 3274.182","Month: 2023 Mar<br />Volume: 3502.770","Month: 2023 Apr<br />Volume: 4401.407","Month: 2023 May<br />Volume: 3485.313","Month: 2023 Jun<br />Volume: 3164.092","Month: 2023 Jul<br />Volume: 3856.310","Month: 2023 Aug<br />Volume: 3100.742","Month: 2023 Sep<br />Volume: 2846.626","Month: 2023 Oct<br />Volume: 3700.245","Month: 2023 Nov<br />Volume: 3257.643"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x2","yaxis":"y2","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":55.452054794520549,"r":7.3059360730593621,"b":25.570776255707766,"l":48.949771689497723},"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"title":{"text":"Forecasting with Prophet","font":{"color":"rgba(0,0,0,1)","family":"","size":17.534246575342465},"x":0,"xref":"paper"},"xaxis":{"domain":[0,0.49592302674494454],"automargin":true,"type":"linear","autorange":false,"range":[18576.299999999999,19713.700000000001],"tickmode":"array","ticktext":["2021 Jan","2022 Jan","2023 Jan"],"tickvals":[18628,18993,19358],"categoryorder":"array","categoryarray":["2021 Jan","2022 Jan","2023 Jan"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y2","title":"","hoverformat":".2f"},"yaxis":{"domain":[0.51484018264840181,1],"automargin":true,"type":"linear","autorange":false,"range":[2664.628023811104,5046.3223604647346],"tickmode":"array","ticktext":["3000","3500","4000","4500","5000"],"tickvals":[3000,3500,4000,4500,5000],"categoryorder":"array","categoryarray":["3000","3500","4000","4500","5000"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":"","hoverformat":".2f"},"annotations":[{"text":"Volume","x":0,"y":0.5,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"xref":"paper","yref":"paper","textangle":-90,"xanchor":"right","yanchor":"center","annotationType":"axis","xshift":-33.607305936073068},{"text":"Order = 10","x":0.24796151337247227,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.68949771689498},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"Order = 2","x":0.7520384866275277,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.68949771689498},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"Order = 3","x":0.24796151337247227,"y":0.48515981735159819,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.68949771689498},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"Order = 5","x":0.7520384866275277,"y":0.48515981735159819,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.68949771689498},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"}],"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":0.49592302674494454,"y0":0.51484018264840181,"y1":1},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"transparent","width":0.66417600664176002,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":0.49592302674494454,"y0":0,"y1":23.37899543378996,"yanchor":1,"ysizemode":"pixel"},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0.5040769732550554,"x1":1,"y0":0.51484018264840181,"y1":1},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"transparent","width":0.66417600664176002,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.5040769732550554,"x1":1,"y0":0,"y1":23.37899543378996,"yanchor":1,"ysizemode":"pixel"},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":0.49592302674494454,"y0":0,"y1":0.48515981735159819},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"transparent","width":0.66417600664176002,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":0.49592302674494454,"y0":0,"y1":23.37899543378996,"yanchor":0.48515981735159819,"ysizemode":"pixel"},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0.5040769732550554,"x1":1,"y0":0,"y1":0.48515981735159819},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"transparent","width":0.66417600664176002,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.5040769732550554,"x1":1,"y0":0,"y1":23.37899543378996,"yanchor":0.48515981735159819,"ysizemode":"pixel"}],"xaxis2":{"type":"linear","autorange":false,"range":[18576.299999999999,19713.700000000001],"tickmode":"array","ticktext":["2021 Jan","2022 Jan","2023 Jan"],"tickvals":[18628,18993,19358],"categoryorder":"array","categoryarray":["2021 Jan","2022 Jan","2023 Jan"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0.5040769732550554,1],"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y2","title":"","hoverformat":".2f"},"yaxis2":{"type":"linear","autorange":false,"range":[2664.628023811104,5046.3223604647346],"tickmode":"array","ticktext":["3000","3500","4000","4500","5000"],"tickvals":[3000,3500,4000,4500,5000],"categoryorder":"array","categoryarray":["3000","3500","4000","4500","5000"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0,0.48515981735159819],"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":"","hoverformat":".2f"},"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.8897637795275593,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"84c040a838f6":{"x":{},"y":{},"colour":{},"type":"scatter"},"84c028ba2414":{"x":{},"y":{}}},"cur_data":"84c040a838f6","visdat":{"84c040a838f6":["function (y) ","x"],"84c028ba2414":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p><sup>Note:&nbsp;You&nbsp;can&nbsp;hover&nbsp;the&nbsp;cursor&nbsp;over&nbsp;the&nbsp;graph&nbsp;to&nbsp;see&nbsp;the&nbsp;values&nbsp;of&nbsp;each&nbsp;point.</sup></p>
<p>Forecasts are also performed to check the confidence intervals of each model.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="english_files/figure-html/unnamed-chunk-36-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="forecasting-with-neural-network-autoregression-nnar" class="level2">
<h2 class="anchored" data-anchor-id="forecasting-with-neural-network-autoregression-nnar">FORECASTING WITH NEURAL NETWORK AUTOREGRESSION (NNAR)</h2>
<p>The Neural Network AutoRegressive Regression (NNAR) model is also reviewed to expand the options offered. For this model, different numbers of nodes are reviewed and their accuracy is reviewed to choose the best model.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Estimating Models NNAR</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">10</span>) <span class="co"># set random numbers</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>mod_rn <span class="ot">=</span> train_data <span class="sc">%&gt;%</span> </span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">model</span>(</span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">NNAR(10,1,2)</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">NNETAR</span>(<span class="fu">box_cox</span>(Volume,lambda),<span class="at">n_nodes=</span><span class="dv">2</span>),</span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">NNAR(10,1,3)</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">NNETAR</span>(<span class="fu">box_cox</span>(Volume,lambda),<span class="at">n_nodes=</span><span class="dv">3</span>),</span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">NNAR(10,1,4)</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">NNETAR</span>(<span class="fu">box_cox</span>(Volume,lambda),<span class="at">n_nodes=</span><span class="dv">4</span>),</span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">NNAR(10,1,6)</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">NNETAR</span>(<span class="fu">box_cox</span>(Volume,lambda),<span class="at">n_nodes=</span><span class="dv">6</span>)</span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Forecast Accuracy</span></span>
<span id="cb47-12"><a href="#cb47-12" aria-hidden="true" tabindex="-1"></a>mod_rn <span class="sc">%&gt;%</span> <span class="fu">forecast</span>(<span class="at">h =</span> pap) <span class="sc">%&gt;%</span> <span class="fu">accuracy</span>(test_data) <span class="sc">%&gt;%</span> </span>
<span id="cb47-13"><a href="#cb47-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(.model,RMSE,MAE,MAPE) <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(MAPE)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 4
  .model        RMSE   MAE  MAPE
  &lt;chr&gt;        &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 NNAR(10,1,3)  363.  345.  10.1
2 NNAR(10,1,2)  379.  353.  10.5
3 NNAR(10,1,4)  404.  379.  11.0
4 NNAR(10,1,6)  467.  416.  11.9</code></pre>
</div>
</div>
<p>Once the best model has been identified, it is validated.</p>
<section id="model-validation-4" class="level3">
<h3 class="anchored" data-anchor-id="model-validation-4">Model Validation</h3>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="english_files/figure-html/unnamed-chunk-38-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="english_files/figure-html/unnamed-chunk-38-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Jarque Bera Test

data:  na.omit(residuals$.innov)
X-squared = 3.5995, df = 2, p-value = 0.1653</code></pre>
</div>
</div>
</section>
<section id="forecast-charts-4" class="level3">
<h3 class="anchored" data-anchor-id="forecast-charts-4">Forecast Charts</h3>
<p>Forecasts are made with confidence intervals with the assumption of normality and Bootstrap.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="english_files/figure-html/unnamed-chunk-39-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>The forecasts of the main models were plotted for comparison.</p>
<div class="cell">
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-d41983f66f12421810aa" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-d41983f66f12421810aa">{"x":{"data":[{"x":[19389,19417,19448,19478,19509,19539,19570,19601,19631,19662],"y":[3612.1794623923001,3918.9371656250732,4010.4737592240954,3622.6682377533139,3670.3678629737597,3396.0321488410968,2757.3854953531263,3396.8523478866009,3571.8315854050852,2994.9894801818646],"text":["Month: 2023 Feb<br />interaction(format(.model), sep = \"/\"): NNAR(10,1,2)<br />Volume: 3612.179<br />.model: NNAR(10,1,2)","Month: 2023 Mar<br />interaction(format(.model), sep = \"/\"): NNAR(10,1,2)<br />Volume: 3918.937<br />.model: NNAR(10,1,2)","Month: 2023 Apr<br />interaction(format(.model), sep = \"/\"): NNAR(10,1,2)<br />Volume: 4010.474<br />.model: NNAR(10,1,2)","Month: 2023 May<br />interaction(format(.model), sep = \"/\"): NNAR(10,1,2)<br />Volume: 3622.668<br />.model: NNAR(10,1,2)","Month: 2023 Jun<br />interaction(format(.model), sep = \"/\"): NNAR(10,1,2)<br />Volume: 3670.368<br />.model: NNAR(10,1,2)","Month: 2023 Jul<br />interaction(format(.model), sep = \"/\"): NNAR(10,1,2)<br />Volume: 3396.032<br />.model: NNAR(10,1,2)","Month: 2023 Aug<br />interaction(format(.model), sep = \"/\"): NNAR(10,1,2)<br />Volume: 2757.385<br />.model: NNAR(10,1,2)","Month: 2023 Sep<br />interaction(format(.model), sep = \"/\"): NNAR(10,1,2)<br />Volume: 3396.852<br />.model: NNAR(10,1,2)","Month: 2023 Oct<br />interaction(format(.model), sep = \"/\"): NNAR(10,1,2)<br />Volume: 3571.832<br />.model: NNAR(10,1,2)","Month: 2023 Nov<br />interaction(format(.model), sep = \"/\"): NNAR(10,1,2)<br />Volume: 2994.989<br />.model: NNAR(10,1,2)"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(248,118,109,1)","dash":"solid"},"hoveron":"points","name":"NNAR(10,1,2)","legendgroup":"NNAR(10,1,2)","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[19389,19417,19448,19478,19509,19539,19570,19601,19631,19662],"y":[3427.3901547672053,3858.2983788324991,3969.4642795139039,3767.5992320796577,3743.8740524423074,3438.1981613304279,2786.3831780462547,3198.4386385125263,3494.4791026730181,2904.9522940999382],"text":["Month: 2023 Feb<br />interaction(format(.model), sep = \"/\"): NNAR(10,1,3)<br />Volume: 3427.390<br />.model: NNAR(10,1,3)","Month: 2023 Mar<br />interaction(format(.model), sep = \"/\"): NNAR(10,1,3)<br />Volume: 3858.298<br />.model: NNAR(10,1,3)","Month: 2023 Apr<br />interaction(format(.model), sep = \"/\"): NNAR(10,1,3)<br />Volume: 3969.464<br />.model: NNAR(10,1,3)","Month: 2023 May<br />interaction(format(.model), sep = \"/\"): NNAR(10,1,3)<br />Volume: 3767.599<br />.model: NNAR(10,1,3)","Month: 2023 Jun<br />interaction(format(.model), sep = \"/\"): NNAR(10,1,3)<br />Volume: 3743.874<br />.model: NNAR(10,1,3)","Month: 2023 Jul<br />interaction(format(.model), sep = \"/\"): NNAR(10,1,3)<br />Volume: 3438.198<br />.model: NNAR(10,1,3)","Month: 2023 Aug<br />interaction(format(.model), sep = \"/\"): NNAR(10,1,3)<br />Volume: 2786.383<br />.model: NNAR(10,1,3)","Month: 2023 Sep<br />interaction(format(.model), sep = \"/\"): NNAR(10,1,3)<br />Volume: 3198.439<br />.model: NNAR(10,1,3)","Month: 2023 Oct<br />interaction(format(.model), sep = \"/\"): NNAR(10,1,3)<br />Volume: 3494.479<br />.model: NNAR(10,1,3)","Month: 2023 Nov<br />interaction(format(.model), sep = \"/\"): NNAR(10,1,3)<br />Volume: 2904.952<br />.model: NNAR(10,1,3)"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(124,174,0,1)","dash":"solid"},"hoveron":"points","name":"NNAR(10,1,3)","legendgroup":"NNAR(10,1,3)","showlegend":true,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"x":[19389,19417,19448,19478,19509,19539,19570,19601,19631,19662],"y":[3535.7798159571371,4057.825844531038,3937.8146760829441,3809.4212351661513,3593.8329458857966,3239.5765123200185,2703.807554043095,3238.232768126607,3562.4502827585775,3043.9702336415144],"text":["Month: 2023 Feb<br />interaction(format(.model), sep = \"/\"): NNAR(10,1,4)<br />Volume: 3535.780<br />.model: NNAR(10,1,4)","Month: 2023 Mar<br />interaction(format(.model), sep = \"/\"): NNAR(10,1,4)<br />Volume: 4057.826<br />.model: NNAR(10,1,4)","Month: 2023 Apr<br />interaction(format(.model), sep = \"/\"): NNAR(10,1,4)<br />Volume: 3937.815<br />.model: NNAR(10,1,4)","Month: 2023 May<br />interaction(format(.model), sep = \"/\"): NNAR(10,1,4)<br />Volume: 3809.421<br />.model: NNAR(10,1,4)","Month: 2023 Jun<br />interaction(format(.model), sep = \"/\"): NNAR(10,1,4)<br />Volume: 3593.833<br />.model: NNAR(10,1,4)","Month: 2023 Jul<br />interaction(format(.model), sep = \"/\"): NNAR(10,1,4)<br />Volume: 3239.577<br />.model: NNAR(10,1,4)","Month: 2023 Aug<br />interaction(format(.model), sep = \"/\"): NNAR(10,1,4)<br />Volume: 2703.808<br />.model: NNAR(10,1,4)","Month: 2023 Sep<br />interaction(format(.model), sep = \"/\"): NNAR(10,1,4)<br />Volume: 3238.233<br />.model: NNAR(10,1,4)","Month: 2023 Oct<br />interaction(format(.model), sep = \"/\"): NNAR(10,1,4)<br />Volume: 3562.450<br />.model: NNAR(10,1,4)","Month: 2023 Nov<br />interaction(format(.model), sep = \"/\"): NNAR(10,1,4)<br />Volume: 3043.970<br />.model: NNAR(10,1,4)"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(0,191,196,1)","dash":"solid"},"hoveron":"points","name":"NNAR(10,1,4)","legendgroup":"NNAR(10,1,4)","showlegend":true,"xaxis":"x","yaxis":"y2","hoverinfo":"text","frame":null},{"x":[19389,19417,19448,19478,19509,19539,19570,19601,19631,19662],"y":[3361.7140748137908,4262.7073643019667,3767.943503819457,3594.3789282151479,3513.2546399448365,3338.4162430964316,2524.6991911891482,3073.5318725752736,3299.4613948114411,2761.3301453996296],"text":["Month: 2023 Feb<br />interaction(format(.model), sep = \"/\"): NNAR(10,1,6)<br />Volume: 3361.714<br />.model: NNAR(10,1,6)","Month: 2023 Mar<br />interaction(format(.model), sep = \"/\"): NNAR(10,1,6)<br />Volume: 4262.707<br />.model: NNAR(10,1,6)","Month: 2023 Apr<br />interaction(format(.model), sep = \"/\"): NNAR(10,1,6)<br />Volume: 3767.944<br />.model: NNAR(10,1,6)","Month: 2023 May<br />interaction(format(.model), sep = \"/\"): NNAR(10,1,6)<br />Volume: 3594.379<br />.model: NNAR(10,1,6)","Month: 2023 Jun<br />interaction(format(.model), sep = \"/\"): NNAR(10,1,6)<br />Volume: 3513.255<br />.model: NNAR(10,1,6)","Month: 2023 Jul<br />interaction(format(.model), sep = \"/\"): NNAR(10,1,6)<br />Volume: 3338.416<br />.model: NNAR(10,1,6)","Month: 2023 Aug<br />interaction(format(.model), sep = \"/\"): NNAR(10,1,6)<br />Volume: 2524.699<br />.model: NNAR(10,1,6)","Month: 2023 Sep<br />interaction(format(.model), sep = \"/\"): NNAR(10,1,6)<br />Volume: 3073.532<br />.model: NNAR(10,1,6)","Month: 2023 Oct<br />interaction(format(.model), sep = \"/\"): NNAR(10,1,6)<br />Volume: 3299.461<br />.model: NNAR(10,1,6)","Month: 2023 Nov<br />interaction(format(.model), sep = \"/\"): NNAR(10,1,6)<br />Volume: 2761.330<br />.model: NNAR(10,1,6)"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(199,124,255,1)","dash":"solid"},"hoveron":"points","name":"NNAR(10,1,6)","legendgroup":"NNAR(10,1,6)","showlegend":true,"xaxis":"x2","yaxis":"y2","hoverinfo":"text","frame":null},{"x":[18628,18659,18687,18718,18748,18779,18809,18840,18871,18901,18932,18962,18993,19024,19052,19083,19113,19144,19174,19205,19236,19266,19297,19327,19358,19389,19417,19448,19478,19509,19539,19570,19601,19631,19662],"y":[4412.3353034387201,3727.1616538272001,3569.9044871071201,3558.23449934664,4671.4607829398401,3120.6949342539197,2787.04210737528,3715.1196072287203,3110.3941819842398,4007.7156812331195,3119.9896621968001,3471.8348394970399,4938.0635269804789,3694.1409817646399,3652.4590611804797,3779.6165431685595,4464.4821085577596,3324.0698065882402,3798.4559607218398,2927.3919951689595,3103.2008887163202,3578.8132970704801,2772.8868572953597,2945.3883167359199,4489.6456781399993,3274.1817308720001,3502.7699000795201,4401.4067843769599,3485.3126816763997,3164.0916593940801,3856.3099556391999,3100.7418757659198,2846.6256984837596,3700.2450101319196,3257.6429727659997],"text":["Month: 2021 Jan<br />Volume: 4412.335","Month: 2021 Feb<br />Volume: 3727.162","Month: 2021 Mar<br />Volume: 3569.904","Month: 2021 Apr<br />Volume: 3558.234","Month: 2021 May<br />Volume: 4671.461","Month: 2021 Jun<br />Volume: 3120.695","Month: 2021 Jul<br />Volume: 2787.042","Month: 2021 Aug<br />Volume: 3715.120","Month: 2021 Sep<br />Volume: 3110.394","Month: 2021 Oct<br />Volume: 4007.716","Month: 2021 Nov<br />Volume: 3119.990","Month: 2021 Dec<br />Volume: 3471.835","Month: 2022 Jan<br />Volume: 4938.064","Month: 2022 Feb<br />Volume: 3694.141","Month: 2022 Mar<br />Volume: 3652.459","Month: 2022 Apr<br />Volume: 3779.617","Month: 2022 May<br />Volume: 4464.482","Month: 2022 Jun<br />Volume: 3324.070","Month: 2022 Jul<br />Volume: 3798.456","Month: 2022 Aug<br />Volume: 2927.392","Month: 2022 Sep<br />Volume: 3103.201","Month: 2022 Oct<br />Volume: 3578.813","Month: 2022 Nov<br />Volume: 2772.887","Month: 2022 Dec<br />Volume: 2945.388","Month: 2023 Jan<br />Volume: 4489.646","Month: 2023 Feb<br />Volume: 3274.182","Month: 2023 Mar<br />Volume: 3502.770","Month: 2023 Apr<br />Volume: 4401.407","Month: 2023 May<br />Volume: 3485.313","Month: 2023 Jun<br />Volume: 3164.092","Month: 2023 Jul<br />Volume: 3856.310","Month: 2023 Aug<br />Volume: 3100.742","Month: 2023 Sep<br />Volume: 2846.626","Month: 2023 Oct<br />Volume: 3700.245","Month: 2023 Nov<br />Volume: 3257.643"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[18628,18659,18687,18718,18748,18779,18809,18840,18871,18901,18932,18962,18993,19024,19052,19083,19113,19144,19174,19205,19236,19266,19297,19327,19358,19389,19417,19448,19478,19509,19539,19570,19601,19631,19662],"y":[4412.3353034387201,3727.1616538272001,3569.9044871071201,3558.23449934664,4671.4607829398401,3120.6949342539197,2787.04210737528,3715.1196072287203,3110.3941819842398,4007.7156812331195,3119.9896621968001,3471.8348394970399,4938.0635269804789,3694.1409817646399,3652.4590611804797,3779.6165431685595,4464.4821085577596,3324.0698065882402,3798.4559607218398,2927.3919951689595,3103.2008887163202,3578.8132970704801,2772.8868572953597,2945.3883167359199,4489.6456781399993,3274.1817308720001,3502.7699000795201,4401.4067843769599,3485.3126816763997,3164.0916593940801,3856.3099556391999,3100.7418757659198,2846.6256984837596,3700.2450101319196,3257.6429727659997],"text":["Month: 2021 Jan<br />Volume: 4412.335","Month: 2021 Feb<br />Volume: 3727.162","Month: 2021 Mar<br />Volume: 3569.904","Month: 2021 Apr<br />Volume: 3558.234","Month: 2021 May<br />Volume: 4671.461","Month: 2021 Jun<br />Volume: 3120.695","Month: 2021 Jul<br />Volume: 2787.042","Month: 2021 Aug<br />Volume: 3715.120","Month: 2021 Sep<br />Volume: 3110.394","Month: 2021 Oct<br />Volume: 4007.716","Month: 2021 Nov<br />Volume: 3119.990","Month: 2021 Dec<br />Volume: 3471.835","Month: 2022 Jan<br />Volume: 4938.064","Month: 2022 Feb<br />Volume: 3694.141","Month: 2022 Mar<br />Volume: 3652.459","Month: 2022 Apr<br />Volume: 3779.617","Month: 2022 May<br />Volume: 4464.482","Month: 2022 Jun<br />Volume: 3324.070","Month: 2022 Jul<br />Volume: 3798.456","Month: 2022 Aug<br />Volume: 2927.392","Month: 2022 Sep<br />Volume: 3103.201","Month: 2022 Oct<br />Volume: 3578.813","Month: 2022 Nov<br />Volume: 2772.887","Month: 2022 Dec<br />Volume: 2945.388","Month: 2023 Jan<br />Volume: 4489.646","Month: 2023 Feb<br />Volume: 3274.182","Month: 2023 Mar<br />Volume: 3502.770","Month: 2023 Apr<br />Volume: 4401.407","Month: 2023 May<br />Volume: 3485.313","Month: 2023 Jun<br />Volume: 3164.092","Month: 2023 Jul<br />Volume: 3856.310","Month: 2023 Aug<br />Volume: 3100.742","Month: 2023 Sep<br />Volume: 2846.626","Month: 2023 Oct<br />Volume: 3700.245","Month: 2023 Nov<br />Volume: 3257.643"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"x":[18628,18659,18687,18718,18748,18779,18809,18840,18871,18901,18932,18962,18993,19024,19052,19083,19113,19144,19174,19205,19236,19266,19297,19327,19358,19389,19417,19448,19478,19509,19539,19570,19601,19631,19662],"y":[4412.3353034387201,3727.1616538272001,3569.9044871071201,3558.23449934664,4671.4607829398401,3120.6949342539197,2787.04210737528,3715.1196072287203,3110.3941819842398,4007.7156812331195,3119.9896621968001,3471.8348394970399,4938.0635269804789,3694.1409817646399,3652.4590611804797,3779.6165431685595,4464.4821085577596,3324.0698065882402,3798.4559607218398,2927.3919951689595,3103.2008887163202,3578.8132970704801,2772.8868572953597,2945.3883167359199,4489.6456781399993,3274.1817308720001,3502.7699000795201,4401.4067843769599,3485.3126816763997,3164.0916593940801,3856.3099556391999,3100.7418757659198,2846.6256984837596,3700.2450101319196,3257.6429727659997],"text":["Month: 2021 Jan<br />Volume: 4412.335","Month: 2021 Feb<br />Volume: 3727.162","Month: 2021 Mar<br />Volume: 3569.904","Month: 2021 Apr<br />Volume: 3558.234","Month: 2021 May<br />Volume: 4671.461","Month: 2021 Jun<br />Volume: 3120.695","Month: 2021 Jul<br />Volume: 2787.042","Month: 2021 Aug<br />Volume: 3715.120","Month: 2021 Sep<br />Volume: 3110.394","Month: 2021 Oct<br />Volume: 4007.716","Month: 2021 Nov<br />Volume: 3119.990","Month: 2021 Dec<br />Volume: 3471.835","Month: 2022 Jan<br />Volume: 4938.064","Month: 2022 Feb<br />Volume: 3694.141","Month: 2022 Mar<br />Volume: 3652.459","Month: 2022 Apr<br />Volume: 3779.617","Month: 2022 May<br />Volume: 4464.482","Month: 2022 Jun<br />Volume: 3324.070","Month: 2022 Jul<br />Volume: 3798.456","Month: 2022 Aug<br />Volume: 2927.392","Month: 2022 Sep<br />Volume: 3103.201","Month: 2022 Oct<br />Volume: 3578.813","Month: 2022 Nov<br />Volume: 2772.887","Month: 2022 Dec<br />Volume: 2945.388","Month: 2023 Jan<br />Volume: 4489.646","Month: 2023 Feb<br />Volume: 3274.182","Month: 2023 Mar<br />Volume: 3502.770","Month: 2023 Apr<br />Volume: 4401.407","Month: 2023 May<br />Volume: 3485.313","Month: 2023 Jun<br />Volume: 3164.092","Month: 2023 Jul<br />Volume: 3856.310","Month: 2023 Aug<br />Volume: 3100.742","Month: 2023 Sep<br />Volume: 2846.626","Month: 2023 Oct<br />Volume: 3700.245","Month: 2023 Nov<br />Volume: 3257.643"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y2","hoverinfo":"text","frame":null},{"x":[18628,18659,18687,18718,18748,18779,18809,18840,18871,18901,18932,18962,18993,19024,19052,19083,19113,19144,19174,19205,19236,19266,19297,19327,19358,19389,19417,19448,19478,19509,19539,19570,19601,19631,19662],"y":[4412.3353034387201,3727.1616538272001,3569.9044871071201,3558.23449934664,4671.4607829398401,3120.6949342539197,2787.04210737528,3715.1196072287203,3110.3941819842398,4007.7156812331195,3119.9896621968001,3471.8348394970399,4938.0635269804789,3694.1409817646399,3652.4590611804797,3779.6165431685595,4464.4821085577596,3324.0698065882402,3798.4559607218398,2927.3919951689595,3103.2008887163202,3578.8132970704801,2772.8868572953597,2945.3883167359199,4489.6456781399993,3274.1817308720001,3502.7699000795201,4401.4067843769599,3485.3126816763997,3164.0916593940801,3856.3099556391999,3100.7418757659198,2846.6256984837596,3700.2450101319196,3257.6429727659997],"text":["Month: 2021 Jan<br />Volume: 4412.335","Month: 2021 Feb<br />Volume: 3727.162","Month: 2021 Mar<br />Volume: 3569.904","Month: 2021 Apr<br />Volume: 3558.234","Month: 2021 May<br />Volume: 4671.461","Month: 2021 Jun<br />Volume: 3120.695","Month: 2021 Jul<br />Volume: 2787.042","Month: 2021 Aug<br />Volume: 3715.120","Month: 2021 Sep<br />Volume: 3110.394","Month: 2021 Oct<br />Volume: 4007.716","Month: 2021 Nov<br />Volume: 3119.990","Month: 2021 Dec<br />Volume: 3471.835","Month: 2022 Jan<br />Volume: 4938.064","Month: 2022 Feb<br />Volume: 3694.141","Month: 2022 Mar<br />Volume: 3652.459","Month: 2022 Apr<br />Volume: 3779.617","Month: 2022 May<br />Volume: 4464.482","Month: 2022 Jun<br />Volume: 3324.070","Month: 2022 Jul<br />Volume: 3798.456","Month: 2022 Aug<br />Volume: 2927.392","Month: 2022 Sep<br />Volume: 3103.201","Month: 2022 Oct<br />Volume: 3578.813","Month: 2022 Nov<br />Volume: 2772.887","Month: 2022 Dec<br />Volume: 2945.388","Month: 2023 Jan<br />Volume: 4489.646","Month: 2023 Feb<br />Volume: 3274.182","Month: 2023 Mar<br />Volume: 3502.770","Month: 2023 Apr<br />Volume: 4401.407","Month: 2023 May<br />Volume: 3485.313","Month: 2023 Jun<br />Volume: 3164.092","Month: 2023 Jul<br />Volume: 3856.310","Month: 2023 Aug<br />Volume: 3100.742","Month: 2023 Sep<br />Volume: 2846.626","Month: 2023 Oct<br />Volume: 3700.245","Month: 2023 Nov<br />Volume: 3257.643"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x2","yaxis":"y2","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":55.452054794520549,"r":7.3059360730593621,"b":25.570776255707766,"l":48.949771689497723},"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"title":{"text":"Forecasting with Autoregression Neural Network Autoregression","font":{"color":"rgba(0,0,0,1)","family":"","size":17.534246575342465},"x":0,"xref":"paper"},"xaxis":{"domain":[0,0.49592302674494454],"automargin":true,"type":"linear","autorange":false,"range":[18576.299999999999,19713.700000000001],"tickmode":"array","ticktext":["2021 Jan","2022 Jan","2023 Jan"],"tickvals":[18628,18993,19358],"categoryorder":"array","categoryarray":["2021 Jan","2022 Jan","2023 Jan"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y2","title":"","hoverformat":".2f"},"yaxis":{"domain":[0.51484018264840181,1],"automargin":true,"type":"linear","autorange":false,"range":[2404.0309743995817,5058.7317437700458],"tickmode":"array","ticktext":["2500","3000","3500","4000","4500","5000"],"tickvals":[2500,3000,3500,4000,4500,5000],"categoryorder":"array","categoryarray":["2500","3000","3500","4000","4500","5000"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":"","hoverformat":".2f"},"annotations":[{"text":"Volume","x":0,"y":0.5,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"xref":"paper","yref":"paper","textangle":-90,"xanchor":"right","yanchor":"center","annotationType":"axis","xshift":-33.607305936073068},{"text":"NNAR(10,1,2)","x":0.24796151337247227,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.68949771689498},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"NNAR(10,1,3)","x":0.7520384866275277,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.68949771689498},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"NNAR(10,1,4)","x":0.24796151337247227,"y":0.48515981735159819,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.68949771689498},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"NNAR(10,1,6)","x":0.7520384866275277,"y":0.48515981735159819,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.68949771689498},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"}],"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":0.49592302674494454,"y0":0.51484018264840181,"y1":1},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"transparent","width":0.66417600664176002,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":0.49592302674494454,"y0":0,"y1":23.37899543378996,"yanchor":1,"ysizemode":"pixel"},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0.5040769732550554,"x1":1,"y0":0.51484018264840181,"y1":1},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"transparent","width":0.66417600664176002,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.5040769732550554,"x1":1,"y0":0,"y1":23.37899543378996,"yanchor":1,"ysizemode":"pixel"},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":0.49592302674494454,"y0":0,"y1":0.48515981735159819},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"transparent","width":0.66417600664176002,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":0.49592302674494454,"y0":0,"y1":23.37899543378996,"yanchor":0.48515981735159819,"ysizemode":"pixel"},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0.5040769732550554,"x1":1,"y0":0,"y1":0.48515981735159819},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"transparent","width":0.66417600664176002,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.5040769732550554,"x1":1,"y0":0,"y1":23.37899543378996,"yanchor":0.48515981735159819,"ysizemode":"pixel"}],"xaxis2":{"type":"linear","autorange":false,"range":[18576.299999999999,19713.700000000001],"tickmode":"array","ticktext":["2021 Jan","2022 Jan","2023 Jan"],"tickvals":[18628,18993,19358],"categoryorder":"array","categoryarray":["2021 Jan","2022 Jan","2023 Jan"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0.5040769732550554,1],"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y2","title":"","hoverformat":".2f"},"yaxis2":{"type":"linear","autorange":false,"range":[2404.0309743995817,5058.7317437700458],"tickmode":"array","ticktext":["2500","3000","3500","4000","4500","5000"],"tickvals":[2500,3000,3500,4000,4500,5000],"categoryorder":"array","categoryarray":["2500","3000","3500","4000","4500","5000"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0,0.48515981735159819],"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":"","hoverformat":".2f"},"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.8897637795275593,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"84c043cc722d":{"x":{},"y":{},"colour":{},"type":"scatter"},"84c0286a4949":{"x":{},"y":{}}},"cur_data":"84c043cc722d","visdat":{"84c043cc722d":["function (y) ","x"],"84c0286a4949":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p><sup>Note:&nbsp;You&nbsp;can&nbsp;hover&nbsp;the&nbsp;cursor&nbsp;over&nbsp;the&nbsp;graph&nbsp;to&nbsp;see&nbsp;the&nbsp;values&nbsp;of&nbsp;each&nbsp;point.</sup></p>
<p>Forecasts are also performed to check the confidence intervals of each model.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="english_files/figure-html/unnamed-chunk-41-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="cross-validation" class="level2">
<h2 class="anchored" data-anchor-id="cross-validation">CROSS-VALIDATION</h2>
<p>In order to perform a more complete evaluation of the point accuracy of the best models so far analyzed, a cross-validation is performed, which is a more sophisticated version of the training and test sets.</p>
<p>For this procedure it is necessary to first make an extended series to go through a window where the size of the training set will be increased to see the accuracy in different scenarios and obtain an average error of these to evaluate the accuracy of each model.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create extended series with index for Cross-Validation</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>serie_alargada <span class="ot">=</span> serie <span class="sc">%&gt;%</span> </span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stretch_tsibble</span>(<span class="at">.init =</span> <span class="dv">80</span>, <span class="at">.step =</span> <span class="dv">10</span>) <span class="sc">%&gt;%</span></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(.id <span class="sc">!=</span> <span class="fu">max</span>(.id))</span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Models for cross-validation</span></span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">10</span>)</span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a>mod_vc <span class="ot">=</span> serie_alargada <span class="sc">%&gt;%</span></span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">model</span>(</span>
<span id="cb50-10"><a href="#cb50-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Exp. Smo. ETS(M,Ad,M)</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">ETS</span>(Volume <span class="sc">~</span> <span class="fu">error</span>(<span class="st">"M"</span>) <span class="sc">+</span> <span class="fu">trend</span>(<span class="st">"Ad"</span>) <span class="sc">+</span> <span class="fu">season</span>(<span class="st">"M"</span>)),</span>
<span id="cb50-11"><a href="#cb50-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">ARIMA(1,1,9)(1,1,0)</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">ARIMA</span>(<span class="fu">box_cox</span>(Volume,lambda) <span class="sc">~</span> <span class="dv">0</span> <span class="sc">+</span> <span class="fu">pdq</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">9</span>) <span class="sc">+</span> <span class="fu">PDQ</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>)),</span>
<span id="cb50-12"><a href="#cb50-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">ARIMA(3,1,2)(0,0,2)</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">ARIMA</span>(<span class="fu">box_cox</span>(Volume,lambda) <span class="sc">~</span> <span class="dv">0</span> <span class="sc">+</span> <span class="fu">pdq</span>(<span class="dv">3</span>,<span class="dv">1</span>,<span class="dv">2</span>) <span class="sc">+</span> <span class="fu">PDQ</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">2</span>)),</span>
<span id="cb50-13"><a href="#cb50-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">STL decomposition</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">decomposition_model</span>(<span class="fu">STL</span>(<span class="fu">box_cox</span>(Volume,lambda)),</span>
<span id="cb50-14"><a href="#cb50-14" aria-hidden="true" tabindex="-1"></a>                                              <span class="fu">ETS</span>(season_adjust), <span class="fu">ETS</span>(season_year)),</span>
<span id="cb50-15"><a href="#cb50-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Prophet</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">prophet</span>(Volume <span class="sc">~</span> <span class="fu">season</span>(</span>
<span id="cb50-16"><a href="#cb50-16" aria-hidden="true" tabindex="-1"></a>      <span class="at">period=</span><span class="st">"year"</span>, <span class="at">order =</span> <span class="dv">10</span>, <span class="at">type =</span> <span class="st">"multiplicative"</span>)),</span>
<span id="cb50-17"><a href="#cb50-17" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Neu. Net AR (10,1,3)</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">NNETAR</span>(<span class="fu">box_cox</span>(Volume,lambda),<span class="at">n_nodes=</span><span class="dv">3</span>)</span>
<span id="cb50-18"><a href="#cb50-18" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb50-19"><a href="#cb50-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-20"><a href="#cb50-20" aria-hidden="true" tabindex="-1"></a>mod_vc <span class="sc">%&gt;%</span> <span class="fu">forecast</span>(<span class="at">h =</span> <span class="dv">10</span>) <span class="sc">%&gt;%</span> <span class="fu">accuracy</span>(serie) <span class="sc">%&gt;%</span> </span>
<span id="cb50-21"><a href="#cb50-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(.model,RMSE,MAE,MAPE) <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(MAPE)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 4
  .model                 RMSE   MAE  MAPE
  &lt;chr&gt;                 &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 Exp. Smo. ETS(M,Ad,M)  500.  398.  10.6
2 ARIMA(3,1,2)(0,0,2)    541.  423.  12.4
3 Prophet                617.  500.  14.3
4 Neu. Net AR (10,1,3)   618.  527.  14.8
5 STL decomposition      613.  513.  15.0
6 ARIMA(1,1,9)(1,1,0)    648.  601.  17.3</code></pre>
</div>
</div>
</section>
<section id="distribution-accuracy" class="level2">
<h2 class="anchored" data-anchor-id="distribution-accuracy">DISTRIBUTION ACCURACY</h2>
<p>It is also important to analyze the accuracy of the confidence intervals of the implemented models, for which different ways of evaluating the models are shown. These models will be evaluated for 10-period forecasts.</p>
<p>We start with the <em>Skill Score</em>, which helps to rank the overall accuracy of the confidence intervals from best to worst, where the higher this score is, the more accurate the possible confidence intervals returned by the model will be.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  .model                .type skill
  &lt;chr&gt;                 &lt;chr&gt; &lt;dbl&gt;
1 Exp. Smo. ETS(M,Ad,M) Test  0.367
2 ARIMA(3,1,2)(0,0,2)   Test  0.284
3 STL decomposition     Test  0.228
4 Neu. Net AR (10,1,3)  Test  0.173
5 ARIMA(1,1,9)(1,1,0)   Test  0.166
6 Prophet               Test  0.160</code></pre>
</div>
</div>
<p>The above table shows that the Exponential Smoothing model ETS(M,Ad,M) has the best overall accuracy, regardless of the confidence level. However, the evaluation can be customized according to different needs, such as specific confidence intervals, or prioritizing the lower or upper part of the interval.</p>
<p>On the other hand, the <em>Winkler Score</em> measures the accuracy for a given confidence level. The narrower the interval, the lower the Score. The more it misses the interval, the more it is penalized and the score increases. Therefore, the lower the Score the better. For example, for forecasts with a confidence level of 95%, the model that would show a better score would be the STL Decomposition Model, being the one that has the best balance between having a narrower range and not falling outside the range.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  .model                .type winkler
  &lt;chr&gt;                 &lt;chr&gt;   &lt;dbl&gt;
1 STL decomposition     Test    2514.
2 Exp. Smo. ETS(M,Ad,M) Test    2710.
3 ARIMA(1,1,9)(1,1,0)   Test    2793.
4 ARIMA(3,1,2)(0,0,2)   Test    2861.
5 Neu. Net AR (10,1,3)  Test    3517.
6 Prophet               Test    4477.</code></pre>
</div>
</div>
<p>Similarly, the <em>Quantile Score</em> may be useful if someone is more interested in not exceeding the lower or upper limit of the inteval. A specific score can be used for a given quantile. For instance, if someone’s priority is to satisfy a demand and not producing less than can be sold, a quantile of 1% can be used:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  .model                .type    qs
  &lt;chr&gt;                 &lt;chr&gt; &lt;dbl&gt;
1 STL decomposition     Test   20.4
2 ARIMA(1,1,9)(1,1,0)   Test   22.1
3 ARIMA(3,1,2)(0,0,2)   Test   25.5
4 Exp. Smo. ETS(M,Ad,M) Test   31.0
5 Neu. Net AR (10,1,3)  Test   46.2
6 Prophet               Test   90.9</code></pre>
</div>
</div>
<p>On the other hand, if someone’s priority was not to waste product and not to produce more than could be sold in order to avoid shrinkage, a 90% quantile can be used:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  .model                .type    qs
  &lt;chr&gt;                 &lt;chr&gt; &lt;dbl&gt;
1 ARIMA(3,1,2)(0,0,2)   Test   207.
2 Prophet               Test   224.
3 Neu. Net AR (10,1,3)  Test   235.
4 Exp. Smo. ETS(M,Ad,M) Test   236.
5 STL decomposition     Test   241.
6 ARIMA(1,1,9)(1,1,0)   Test   265.</code></pre>
</div>
</div>
<section id="forecast-interval-graphs" class="level3">
<h3 class="anchored" data-anchor-id="forecast-interval-graphs">Forecast Interval Graphs</h3>
<p>Finally, a comparison of the different forecasts for the next 10 periods is presented, showing their confidence intervals.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="english_files/figure-html/unnamed-chunk-47-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="conclusions" class="level2">
<h2 class="anchored" data-anchor-id="conclusions">CONCLUSIONS</h2>
<p>According to the particular needs different Models can be recommended. In general terms the <strong>Exponential Smoothing Model ETS(M,Ad,M)</strong> is the one that shows both a better point accuracy and a better confidence interval as measured by the <em>Skill Score</em>.</p>
<p>However, if a confidence level has been determined beforehand, for example 95%, the model with the best confidence interval would be the <strong>STL Decomposition Model</strong> measured by the <em>Winkler Score</em>.</p>
<p>Likewise, if what matters most is to satisfy a demand and not generate less than what might be needed, for example for a 99% confidence, the <strong>STL Decomposition Model</strong> would also be the best according to the <em>Quantile Score</em> for a 1% quantile.</p>
<p>On the other hand, if the main concern is not to generate more than what might be needed (as to avoid shrinkage), for example, for a 90% confidence level, the indicated model would be the <strong>ARIMA(3,1,2)(0,0,2)</strong> model according to the <em>Quantile Score</em> for a 90% quantile.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>